{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\src\\store\\modules\\user.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\src\\store\\modules\\user.js","mtime":1620833396795},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwoKdmFyIF9sb2dpbiA9IHJlcXVpcmUoIkAvYXBpL3ZhZG1pbi9sb2dpbiIpOwoKdmFyIF9hdXRoID0gcmVxdWlyZSgiQC91dGlscy9hdXRoIik7Cgp2YXIgdXNlciA9IHsKICBzdGF0ZTogewogICAgdG9rZW46ICgwLCBfYXV0aC5nZXRUb2tlbikoKSwKICAgIG5hbWU6ICcnLAogICAgYXZhdGFyOiAnJywKICAgIHJvbGVzOiBbXSwKICAgIHBlcm1pc3Npb25zOiBbXSwKICAgIHVucmVhZF9tc2dfY291bnQ6IDAKICB9LAogIG11dGF0aW9uczogewogICAgU0VUX1RPS0VOOiBmdW5jdGlvbiBTRVRfVE9LRU4oc3RhdGUsIHRva2VuKSB7CiAgICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgICB9LAogICAgU0VUX05BTUU6IGZ1bmN0aW9uIFNFVF9OQU1FKHN0YXRlLCBuYW1lKSB7CiAgICAgIHN0YXRlLm5hbWUgPSBuYW1lOwogICAgfSwKICAgIFNFVF9BVkFUQVI6IGZ1bmN0aW9uIFNFVF9BVkFUQVIoc3RhdGUsIGF2YXRhcikgewogICAgICBzdGF0ZS5hdmF0YXIgPSBhdmF0YXI7CiAgICB9LAogICAgU0VUX1JPTEVTOiBmdW5jdGlvbiBTRVRfUk9MRVMoc3RhdGUsIHJvbGVzKSB7CiAgICAgIHN0YXRlLnJvbGVzID0gcm9sZXM7CiAgICB9LAogICAgU0VUX1BFUk1JU1NJT05TOiBmdW5jdGlvbiBTRVRfUEVSTUlTU0lPTlMoc3RhdGUsIHBlcm1pc3Npb25zKSB7CiAgICAgIHN0YXRlLnBlcm1pc3Npb25zID0gcGVybWlzc2lvbnM7CiAgICB9LAogICAgU0VUX1VOUkVBRF9NU0dfQ09VTlQ6IGZ1bmN0aW9uIFNFVF9VTlJFQURfTVNHX0NPVU5UKHN0YXRlLCB1bnJlYWRfbXNnX2NvdW50KSB7CiAgICAgIHN0YXRlLnVucmVhZF9tc2dfY291bnQgPSB1bnJlYWRfbXNnX2NvdW50OwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgLy8g55m75b2VCiAgICBMb2dpbjogZnVuY3Rpb24gTG9naW4oX3JlZiwgdXNlckluZm8pIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICB2YXIgdXNlcm5hbWUgPSB1c2VySW5mby51c2VybmFtZS50cmltKCk7CiAgICAgIHZhciBwYXNzd29yZCA9IHVzZXJJbmZvLnBhc3N3b3JkOwogICAgICB2YXIgY29kZSA9IHVzZXJJbmZvLmNvZGU7CiAgICAgIHZhciB1dWlkID0gdXNlckluZm8udXVpZDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAoMCwgX2xvZ2luLmxvZ2luKSh1c2VybmFtZSwgcGFzc3dvcmQsIGNvZGUsIHV1aWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgKDAsIF9hdXRoLnNldFRva2VuKShyZXMuZGF0YS50b2tlbik7CiAgICAgICAgICBjb21taXQoJ1NFVF9UT0tFTicsIHJlcy5kYXRhLnRva2VuKTsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOiOt+WPlueUqOaIt+S/oeaBrwogICAgR2V0SW5mbzogZnVuY3Rpb24gR2V0SW5mbyhfcmVmMikgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0LAogICAgICAgICAgc3RhdGUgPSBfcmVmMi5zdGF0ZTsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAoMCwgX2xvZ2luLmdldEluZm8pKHN0YXRlLnRva2VuKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHZhciB1c2VyID0gcmVzLmRhdGEudXNlcjsKICAgICAgICAgIHZhciBhdmF0YXIgPSB1c2VyLmF2YXRhciA/IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEkgKyB1c2VyLmF2YXRhciA6IHJlcXVpcmUoIkAvYXNzZXRzL2ltYWdlcy9wcm9maWxlLmpwZyIpOwoKICAgICAgICAgIGlmIChyZXMuZGF0YS5yb2xlcyAmJiByZXMuZGF0YS5yb2xlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIC8vIOmqjOivgei/lOWbnueahHJvbGVz5piv5ZCm5piv5LiA5Liq6Z2e56m65pWw57uECiAgICAgICAgICAgIGNvbW1pdCgnU0VUX1JPTEVTJywgcmVzLmRhdGEucm9sZXMpOwogICAgICAgICAgICBjb21taXQoJ1NFVF9QRVJNSVNTSU9OUycsIHJlcy5kYXRhLnBlcm1pc3Npb25zKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbW1pdCgnU0VUX1JPTEVTJywgWydST0xFX0RFRkFVTFQnXSk7CiAgICAgICAgICB9CgogICAgICAgICAgY29tbWl0KCdTRVRfTkFNRScsIHVzZXIubmFtZSk7CiAgICAgICAgICBjb21taXQoJ1NFVF9VTlJFQURfTVNHX0NPVU5UJywgdXNlci51bnJlYWRfbXNnX2NvdW50KTsKICAgICAgICAgIGNvbW1pdCgnU0VUX0FWQVRBUicsIGF2YXRhcik7CiAgICAgICAgICByZXNvbHZlKHJlcy5kYXRhKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOmAgOWHuuezu+e7nwogICAgTG9nT3V0OiBmdW5jdGlvbiBMb2dPdXQoX3JlZjMpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwKICAgICAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGU7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgKDAsIF9sb2dpbi5sb2dvdXQpKHN0YXRlLnRva2VuKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgJycpOwogICAgICAgICAgY29tbWl0KCdTRVRfUk9MRVMnLCBbXSk7CiAgICAgICAgICBjb21taXQoJ1NFVF9QRVJNSVNTSU9OUycsIFtdKTsKICAgICAgICAgICgwLCBfYXV0aC5yZW1vdmVUb2tlbikoKTsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWJjeerryDnmbvlh7oKICAgIEZlZExvZ091dDogZnVuY3Rpb24gRmVkTG9nT3V0KF9yZWY0KSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgJycpOwogICAgICAgICgwLCBfYXV0aC5yZW1vdmVUb2tlbikoKTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pOwogICAgfQogIH0KfTsKdmFyIF9kZWZhdWx0ID0gdXNlcjsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},{"version":3,"sources":["C:/Users/Administrator/Desktop/django-vue-admin/dvadmin-ui/src/store/modules/user.js"],"names":["user","state","token","name","avatar","roles","permissions","unread_msg_count","mutations","SET_TOKEN","SET_NAME","SET_AVATAR","SET_ROLES","SET_PERMISSIONS","SET_UNREAD_MSG_COUNT","actions","Login","userInfo","commit","username","trim","password","code","uuid","Promise","resolve","reject","then","res","data","catch","error","GetInfo","process","env","VUE_APP_BASE_API","require","length","LogOut","FedLogOut"],"mappings":"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","sourcesContent":["import {getInfo, login, logout} from '@/api/vadmin/login'\nimport {getToken, removeToken, setToken} from '@/utils/auth'\n\nconst user = {\n  state: {\n    token: getToken(),\n    name: '',\n    avatar: '',\n    roles: [],\n    permissions: [],\n    unread_msg_count: 0\n  },\n\n  mutations: {\n    SET_TOKEN: (state, token) => {\n      state.token = token\n    },\n    SET_NAME: (state, name) => {\n      state.name = name\n    },\n    SET_AVATAR: (state, avatar) => {\n      state.avatar = avatar\n    },\n    SET_ROLES: (state, roles) => {\n      state.roles = roles\n    },\n    SET_PERMISSIONS: (state, permissions) => {\n      state.permissions = permissions\n    },\n    SET_UNREAD_MSG_COUNT: (state, unread_msg_count) => {\n      state.unread_msg_count = unread_msg_count\n    }\n  },\n\n  actions: {\n    // 登录\n    Login({ commit }, userInfo) {\n      const username = userInfo.username.trim()\n      const password = userInfo.password\n      const code = userInfo.code\n      const uuid = userInfo.uuid\n      return new Promise((resolve, reject) => {\n        login(username, password, code, uuid).then(res => {\n          setToken(res.data.token)\n          commit('SET_TOKEN', res.data.token)\n          resolve()\n        }).catch(error => {\n          reject(error)\n        })\n      })\n    },\n\n    // 获取用户信息\n    GetInfo({ commit, state }) {\n      return new Promise((resolve, reject) => {\n        getInfo(state.token).then(res => {\n          const user = res.data.user\n          const avatar = user.avatar ? process.env.VUE_APP_BASE_API + user.avatar : require(\"@/assets/images/profile.jpg\");\n          if (res.data.roles && res.data.roles.length > 0) { // 验证返回的roles是否是一个非空数组\n            commit('SET_ROLES', res.data.roles)\n            commit('SET_PERMISSIONS', res.data.permissions)\n          } else {\n            commit('SET_ROLES', ['ROLE_DEFAULT'])\n          }\n          commit('SET_NAME', user.name)\n          commit('SET_UNREAD_MSG_COUNT', user.unread_msg_count)\n          commit('SET_AVATAR', avatar)\n          resolve(res.data)\n        }).catch(error => {\n          reject(error)\n        })\n      })\n    },\n\n    // 退出系统\n    LogOut({ commit, state }) {\n      return new Promise((resolve, reject) => {\n        logout(state.token).then(() => {\n          commit('SET_TOKEN', '')\n          commit('SET_ROLES', [])\n          commit('SET_PERMISSIONS', [])\n          removeToken()\n          resolve()\n        }).catch(error => {\n          reject(error)\n        })\n      })\n    },\n\n    // 前端 登出\n    FedLogOut({ commit }) {\n      return new Promise(resolve => {\n        commit('SET_TOKEN', '')\n        removeToken()\n        resolve()\n      })\n    }\n  }\n}\n\nexport default user\n"]}]}