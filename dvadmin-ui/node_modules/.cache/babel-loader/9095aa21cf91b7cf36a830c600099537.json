{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\src\\views\\vadmin\\system\\message\\Mymessage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\src\\views\\vadmin\\system\\message\\Mymessage.vue","mtime":1620833396858},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJDOi9Vc2Vycy9BZG1pbmlzdHJhdG9yL0Rlc2t0b3AvZGphbmdvLXZ1ZS1hZG1pbi9kdmFkbWluLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdCIpLmRlZmF1bHQ7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDsKCnZhciBfb2JqZWN0U3ByZWFkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQzovVXNlcnMvQWRtaW5pc3RyYXRvci9EZXNrdG9wL2RqYW5nby12dWUtYWRtaW4vZHZhZG1pbi11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RTcHJlYWQyIikpOwoKdmFyIF9tZXNzYWdlID0gcmVxdWlyZSgiQC9hcGkvdmFkbWluL3N5c3RlbS9tZXNzYWdlIik7Cgp2YXIgX3N0b3JlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL3N0b3JlIikpOwoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KdmFyIF9kZWZhdWx0ID0gewogIG5hbWU6ICJNeW1lc3NhZ2UiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyDmn6Xor6LpgJrnn6UKICAgICAgcXVlcnlQYXJhbXM6IHsKICAgICAgICBwYWdlTnVtOiAxLAogICAgICAgIHBhZ2VTaXplOiAxMAogICAgICB9LAogICAgICBtZXNzYWdlTGlzdDogW10sCiAgICAgIC8vIOW3suivu+mAmuefpQogICAgICBjb3VudFJlYWRlZDogMCwKICAgICAgbWVzc2FnZVJlYWRlZExpc3Q6IFtdLAogICAgICAvLyDmnKror7vmtojmga/liJfooagKICAgICAgbWVzc2FnZVVucmVhZExpc3Q6IFtdLAogICAgICBjb3VudFVucmVhZDogMCwKICAgICAgYmFkZ2VUeXBlOiAnZGFuZ2VyJywKICAgICAgLy8g6YCJ5Lit5p+l6K+i5ZCO55qE6K+m57uG5L+h5oGvCiAgICAgIHNob3dpbmdNc2dJdGVtOiB7fQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8qKiDmn6Xor6LpgJrnn6XliJfooaggKi8KICAgIGdldExpc3Q6IGZ1bmN0aW9uIGdldExpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvLyDlt7Lor7vpgJrnn6XliJfooagKICAgICAgKDAsIF9tZXNzYWdlLnVzZXJNZXNzYWdlKSh0aGlzLmFkZERhdGVSYW5nZSgoMCwgX29iamVjdFNwcmVhZDIuZGVmYXVsdCkoKDAsIF9vYmplY3RTcHJlYWQyLmRlZmF1bHQpKHt9LCB0aGlzLnF1ZXJ5UGFyYW1zKSwge30sIHsKICAgICAgICBpc19yZWFkOiAnVHJ1ZScKICAgICAgfSkpKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLm1lc3NhZ2VSZWFkZWRMaXN0ID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRzOwogICAgICAgIF90aGlzLmNvdW50UmVhZGVkID0gcmVzcG9uc2UuZGF0YS5jb3VudDsKICAgICAgfSk7IC8vIOacquivu+mAmuefpeWIl+ihqAoKICAgICAgKDAsIF9tZXNzYWdlLnVzZXJNZXNzYWdlKSh0aGlzLmFkZERhdGVSYW5nZSgoMCwgX29iamVjdFNwcmVhZDIuZGVmYXVsdCkoKDAsIF9vYmplY3RTcHJlYWQyLmRlZmF1bHQpKHt9LCB0aGlzLnF1ZXJ5UGFyYW1zKSwge30sIHsKICAgICAgICBpc19yZWFkOiAnRmFsc2UnCiAgICAgIH0pKSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5tZXNzYWdlVW5yZWFkTGlzdCA9IHJlc3BvbnNlLmRhdGEucmVzdWx0czsKICAgICAgICBfdGhpcy5jb3VudFVucmVhZCA9IHJlc3BvbnNlLmRhdGEuY291bnQ7CiAgICAgICAgX3RoaXMubWVzc2FnZUxpc3QgPSBfdGhpcy5tZXNzYWdlVW5yZWFkTGlzdDsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlU2VsZWN0OiBmdW5jdGlvbiBoYW5kbGVTZWxlY3Qoa2V5LCBrZXlQYXRoKSB7CiAgICAgIHRoaXMubWVzc2FnZUxpc3QgPSBrZXlbMF0gPT09ICIxIiA/IHRoaXMubWVzc2FnZVVucmVhZExpc3QgOiB0aGlzLm1lc3NhZ2VSZWFkZWRMaXN0OwogICAgICB0aGlzLmJhZGdlVHlwZSA9IGtleVswXSA9PT0gIjEiID8gJ2RhbmdlcicgOiAnaW5mbyc7CiAgICB9LAogICAgLy8g6YCa55+l5YiX6KGo5r+A5rS75ZCOCiAgICBoYW5kbGVMaXN0U2VsZWN0OiBmdW5jdGlvbiBoYW5kbGVMaXN0U2VsZWN0KGtleSwga2V5UGF0aCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuc2hvd2luZ01zZ0l0ZW0gPSB0aGlzLm1lc3NhZ2VMaXN0W2tleVswXV07IC8vIOS/ruaUuemAmuefpeafpeivoueKtuaAgQoKICAgICAgaWYgKHRoaXMuYmFkZ2VUeXBlID09PSAiZGFuZ2VyIikgewogICAgICAgICgwLCBfbWVzc2FnZS51cGRhdGVJc1JlYWQpKHRoaXMuc2hvd2luZ01zZ0l0ZW0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIF9zdG9yZS5kZWZhdWx0LmNvbW1pdCgnU0VUX1VOUkVBRF9NU0dfQ09VTlQnLCBfc3RvcmUuZGVmYXVsdC5nZXR0ZXJzLnVucmVhZF9tc2dfY291bnQgLSAxKTsKCiAgICAgICAgICAgIF90aGlzMi5vcGVuID0gZmFsc2U7CgogICAgICAgICAgICBfdGhpczIuZ2V0TGlzdCgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfQp9OwpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDs="},{"version":3,"sources":["Mymessage.vue"],"names":[],"mappings":";;;;;;;;;;;AAiDA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAEA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA;AACA,MAAA,WAAA,EAAA;AACA,QAAA,OAAA,EAAA,CADA;AAEA,QAAA,QAAA,EAAA;AAFA,OAFA;AAMA,MAAA,WAAA,EAAA,EANA;AAOA;AACA,MAAA,WAAA,EAAA,CARA;AASA,MAAA,iBAAA,EAAA,EATA;AAUA;AACA,MAAA,iBAAA,EAAA,EAXA;AAYA,MAAA,WAAA,EAAA,CAZA;AAaA,MAAA,SAAA,EAAA,QAbA;AAcA;AACA,MAAA,cAAA,EAAA;AAfA,KAAA;AAiBA,GApBA;AAqBA,EAAA,OArBA,qBAqBA;AACA,SAAA,OAAA;AAEA,GAxBA;AAyBA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,OAFA,qBAEA;AAAA;;AACA;AACA,gCAAA,KAAA,YAAA,6DAAA,KAAA,WAAA;AAAA,QAAA,OAAA,EAAA;AAAA,SAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,iBAAA,GAAA,QAAA,CAAA,IAAA,CAAA,OAAA;AACA,QAAA,KAAA,CAAA,WAAA,GAAA,QAAA,CAAA,IAAA,CAAA,KAAA;AAEA,OAJA,EAFA,CAQA;;AACA,gCAAA,KAAA,YAAA,6DAAA,KAAA,WAAA;AAAA,QAAA,OAAA,EAAA;AAAA,SAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,iBAAA,GAAA,QAAA,CAAA,IAAA,CAAA,OAAA;AACA,QAAA,KAAA,CAAA,WAAA,GAAA,QAAA,CAAA,IAAA,CAAA,KAAA;AACA,QAAA,KAAA,CAAA,WAAA,GAAA,KAAA,CAAA,iBAAA;AACA,OAJA;AAMA,KAjBA;AAkBA,IAAA,YAlBA,wBAkBA,GAlBA,EAkBA,OAlBA,EAkBA;AACA,WAAA,WAAA,GAAA,GAAA,CAAA,CAAA,CAAA,KAAA,GAAA,GAAA,KAAA,iBAAA,GAAA,KAAA,iBAAA;AACA,WAAA,SAAA,GAAA,GAAA,CAAA,CAAA,CAAA,KAAA,GAAA,GAAA,QAAA,GAAA,MAAA;AACA,KArBA;AAsBA;AACA,IAAA,gBAvBA,4BAuBA,GAvBA,EAuBA,OAvBA,EAuBA;AAAA;;AACA,WAAA,cAAA,GAAA,KAAA,WAAA,CAAA,GAAA,CAAA,CAAA,CAAA,CAAA,CADA,CAEA;;AACA,UAAA,KAAA,SAAA,KAAA,QAAA,EAAA;AACA,mCAAA,KAAA,cAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,cAAA,QAAA,CAAA,IAAA,KAAA,GAAA,EAAA;AACA,2BAAA,MAAA,CAAA,sBAAA,EAAA,eAAA,OAAA,CAAA,gBAAA,GAAA,CAAA;;AACA,YAAA,MAAA,CAAA,IAAA,GAAA,KAAA;;AACA,YAAA,MAAA,CAAA,OAAA;AACA;AACA,SANA;AAOA;AACA;AAnCA;AAzBA,C","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-card shadow=\"never\">\n      <div class=\"message-page-con message-category-con\">\n        <el-menu\n          default-active=\"1\"\n          class=\"el-menu-vertical-demo\"\n          @select=\"handleSelect\">\n          <el-menu-item index=\"1\">\n            <template slot=\"title\">\n              <span class=\"category-title\">未读消息</span>\n              <el-badge style=\"margin-bottom: 3px\" :value=\"countUnread\" :hidden=\"countUnread===0\"></el-badge>\n            </template>\n          </el-menu-item>\n          <el-menu-item index=\"2\">\n            <span class=\"category-title\">已读消息</span>\n            <el-badge style=\"margin-bottom: 3px\" type=\"info\" :value=\"countReaded\"></el-badge>\n          </el-menu-item>\n        </el-menu>\n      </div>\n      <div class=\"message-page-con message-list-con\">\n        <el-menu\n          default-active=\"2\"\n          class=\"el-menu-vertical-demo\"\n          @select=\"handleListSelect\">\n          <el-menu-item v-for=\"(item,index) in messageList\" :key=\"index\" :index=\"index.toString()\">\n            <template slot=\"title\">\n              <div style=\"line-height: 10px!important;height: 20px;\">\n                <p class=\"msg-title\">{{ item.title }}</p>\n                <el-badge is-dot class=\"item\" :type=\"badgeType\"></el-badge>\n                {{item.create_datetime}}\n\n              </div>\n            </template>\n          </el-menu-item>\n        </el-menu>\n      </div>\n      <div class=\"message-page-con message-view-con\">\n        <div class=\"message-view-header\">\n          <h2 class=\"message-view-title\">{{ showingMsgItem.title }}</h2>\n          <time class=\"message-view-time\">{{ showingMsgItem.create_datetime }}</time>\n        </div>\n        <div v-html=\"showingMsgItem.content\"></div>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\n  import {updateIsRead, userMessage} from \"@/api/vadmin/system/message\";\n  import store from \"@/store\";\n\n  export default {\n    name: \"Mymessage\",\n    data() {\n      return {\n        // 查询通知\n        queryParams: {\n          pageNum: 1,\n          pageSize: 10,\n        },\n        messageList: [],\n        // 已读通知\n        countReaded: 0,\n        messageReadedList: [],\n        // 未读消息列表\n        messageUnreadList: [],\n        countUnread: 0,\n        badgeType: 'danger',\n        // 选中查询后的详细信息\n        showingMsgItem: {}\n      };\n    },\n    created() {\n      this.getList()\n\n    },\n    methods: {\n      /** 查询通知列表 */\n      getList() {\n        // 已读通知列表\n        userMessage(this.addDateRange({...this.queryParams, is_read: 'True'})).then(response => {\n            this.messageReadedList = response.data.results;\n            this.countReaded = response.data.count;\n\n          }\n        );\n        // 未读通知列表\n        userMessage(this.addDateRange({...this.queryParams, is_read: 'False'})).then(response => {\n            this.messageUnreadList = response.data.results;\n            this.countUnread = response.data.count;\n            this.messageList = this.messageUnreadList\n          }\n        );\n      },\n      handleSelect(key, keyPath) {\n        this.messageList = key[0] === \"1\" ? this.messageUnreadList : this.messageReadedList\n        this.badgeType = key[0] === \"1\" ? 'danger' : 'info'\n      },\n      // 通知列表激活后\n      handleListSelect(key, keyPath) {\n        this.showingMsgItem = this.messageList[key[0]]\n        // 修改通知查询状态\n        if (this.badgeType === \"danger\") {\n          updateIsRead(this.showingMsgItem).then(response => {\n            if(response.code === 200){\n              store.commit('SET_UNREAD_MSG_COUNT', store.getters.unread_msg_count - 1);\n              this.open = false;\n              this.getList();\n            }\n          });\n        }\n      }\n    }\n  };\n</script>\n<style scoped>\n  .app-container {\n    background-color: #f5f7f9;\n  }\n\n  .message-category-con {\n    border-right: 1px solid #e6e6e6;\n    width: 200px;\n  }\n\n  .message-page-con {\n    height: calc(100vh - 176px);\n    display: inline-block;\n    vertical-align: top;\n    position: relative;\n  }\n\n  .category-title {\n    display: inline-block;\n    width: 65px;\n  }\n\n\n  .message-list-con {\n    border-right: 1px solid #e6e6e6;\n    width: 230px;\n  }\n\n  .msg-title {\n    word-break: break-all;\n    white-space: normal;\n    line-height: 15px;\n    color: rgb(170, 169, 169);\n  }\n\n  .message-list-con .el-menu-item {\n    height: 80px;\n    padding-top: 5px;\n  }\n\n  .item {\n    margin-right: 10px;\n    margin-bottom: 5px;\n  }\n\n  .message-view-con {\n    position: absolute;\n    left: 486px;\n    top: 16px;\n    right: 16px;\n    bottom: 16px;\n    overflow: auto;\n    padding: 12px 20px 0;\n\n  }\n\n  .message-view-header {\n    margin-bottom: 20px;\n\n  }\n\n  .message-view-title {\n    display: inline-block;\n  }\n\n  .message-view-time {\n    margin-left: 20px;\n  }\n</style>\n"],"sourceRoot":"src/views/vadmin/system/message"}]}