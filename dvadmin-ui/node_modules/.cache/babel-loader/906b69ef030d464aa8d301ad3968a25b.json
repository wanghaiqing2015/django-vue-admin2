{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\src\\utils\\zipdownload.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\src\\utils\\zipdownload.js","mtime":1620833396803},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJDOi9Vc2Vycy9BZG1pbmlzdHJhdG9yL0Rlc2t0b3AvZGphbmdvLXZ1ZS1hZG1pbi9kdmFkbWluLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdCIpLmRlZmF1bHQ7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZG93bkxvYWRaaXAgPSBkb3duTG9hZFppcDsKZXhwb3J0cy5yZXNvbHZlQmxvYiA9IHJlc29sdmVCbG9iOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5jb25zdHJ1Y3Rvci5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIik7Cgp2YXIgX2F4aW9zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJheGlvcyIpKTsKCnZhciBfYXV0aCA9IHJlcXVpcmUoIkAvdXRpbHMvYXV0aCIpOwoKdmFyIG1pbWVNYXAgPSB7CiAgeGxzeDogJ2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0JywKICB6aXA6ICdhcHBsaWNhdGlvbi96aXAnCn07CnZhciBiYXNlVXJsID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSTsKCmZ1bmN0aW9uIGRvd25Mb2FkWmlwKHN0ciwgZmlsZW5hbWUpIHsKICB2YXIgdXJsID0gYmFzZVVybCArIHN0cjsKICAoMCwgX2F4aW9zLmRlZmF1bHQpKHsKICAgIG1ldGhvZDogJ2dldCcsCiAgICB1cmw6IHVybCwKICAgIHJlc3BvbnNlVHlwZTogJ2Jsb2InLAogICAgaGVhZGVyczogewogICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArICgwLCBfYXV0aC5nZXRUb2tlbikoKQogICAgfQogIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgcmVzb2x2ZUJsb2IocmVzLCBtaW1lTWFwLnppcCk7CiAgfSk7Cn0KLyoqCiAqIOino+aekGJsb2Llk43lupTlhoXlrrnlubbkuIvovb0KICogQHBhcmFtIHsqfSByZXMgYmxvYuWTjeW6lOWGheWuuQogKiBAcGFyYW0ge1N0cmluZ30gbWltZVR5cGUgTUlNReexu+WeiwogKi8KCgpmdW5jdGlvbiByZXNvbHZlQmxvYihyZXMsIG1pbWVUeXBlKSB7CiAgdmFyIGFMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogIHZhciBibG9iID0gbmV3IEJsb2IoW3Jlcy5kYXRhXSwgewogICAgdHlwZTogbWltZVR5cGUKICB9KTsgLy8gLy/ku45yZXNwb25zZeeahGhlYWRlcnPkuK3ojrflj5ZmaWxlbmFtZSwg5ZCO56uvcmVzcG9uc2Uuc2V0SGVhZGVyKCJDb250ZW50LWRpc3Bvc2l0aW9uIiwgImF0dGFjaG1lbnQ7IGZpbGVuYW1lPXh4eHguZG9jeCIpIOiuvue9rueahOaWh+S7tuWQjTsKCiAgdmFyIHBhdHQgPSBuZXcgUmVnRXhwKCdmaWxlbmFtZT0oW147XStcXC5bXlxcLjtdKyk7KicpOwogIHZhciBjb250ZW50RGlzcG9zaXRpb24gPSBkZWNvZGVVUkkocmVzLmhlYWRlcnNbJ2NvbnRlbnQtZGlzcG9zaXRpb24nXSk7CiAgdmFyIHJlc3VsdCA9IHBhdHQuZXhlYyhjb250ZW50RGlzcG9zaXRpb24pOwogIHZhciBmaWxlTmFtZSA9IHJlc3VsdFsxXTsKICBmaWxlTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1wiL2csICcnKTsKICBhTGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICBhTGluay5zZXRBdHRyaWJ1dGUoJ2Rvd25sb2FkJywgZmlsZU5hbWUpOyAvLyDorr7nva7kuIvovb3mlofku7blkI3np7AKCiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhTGluayk7CiAgYUxpbmsuY2xpY2soKTsKICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGFMaW5rKTsKfQ=="},{"version":3,"sources":["C:/Users/Administrator/Desktop/django-vue-admin/dvadmin-ui/src/utils/zipdownload.js"],"names":["mimeMap","xlsx","zip","baseUrl","process","env","VUE_APP_BASE_API","downLoadZip","str","filename","url","method","responseType","headers","then","res","resolveBlob","mimeType","aLink","document","createElement","blob","Blob","data","type","patt","RegExp","contentDisposition","decodeURI","result","exec","fileName","replace","href","URL","createObjectURL","setAttribute","body","appendChild","click"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AAEA,IAAMA,OAAO,GAAG;AACdC,EAAAA,IAAI,EAAE,mEADQ;AAEdC,EAAAA,GAAG,EAAE;AAFS,CAAhB;AAKA,IAAMC,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYC,gBAA5B;;AACO,SAASC,WAAT,CAAqBC,GAArB,EAA0BC,QAA1B,EAAoC;AACzC,MAAIC,GAAG,GAAGP,OAAO,GAAGK,GAApB;AACA,sBAAM;AACJG,IAAAA,MAAM,EAAE,KADJ;AAEJD,IAAAA,GAAG,EAAEA,GAFD;AAGJE,IAAAA,YAAY,EAAE,MAHV;AAIJC,IAAAA,OAAO,EAAE;AAAE,uBAAiB,YAAY;AAA/B;AAJL,GAAN,EAKGC,IALH,CAKQ,UAAAC,GAAG,EAAI;AACbC,IAAAA,WAAW,CAACD,GAAD,EAAMf,OAAO,CAACE,GAAd,CAAX;AACD,GAPD;AAQD;AACD;AACA;AACA;AACA;AACA;;;AACO,SAASc,WAAT,CAAqBD,GAArB,EAA0BE,QAA1B,EAAoC;AACzC,MAAMC,KAAK,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAd;AACA,MAAIC,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACP,GAAG,CAACQ,IAAL,CAAT,EAAqB;AAAEC,IAAAA,IAAI,EAAEP;AAAR,GAArB,CAAX,CAFyC,CAGzC;;AACA,MAAIQ,IAAI,GAAG,IAAIC,MAAJ,CAAW,+BAAX,CAAX;AACA,MAAIC,kBAAkB,GAAGC,SAAS,CAACb,GAAG,CAACF,OAAJ,CAAY,qBAAZ,CAAD,CAAlC;AACA,MAAIgB,MAAM,GAAGJ,IAAI,CAACK,IAAL,CAAUH,kBAAV,CAAb;AACA,MAAII,QAAQ,GAAGF,MAAM,CAAC,CAAD,CAArB;AACAE,EAAAA,QAAQ,GAAGA,QAAQ,CAACC,OAAT,CAAiB,KAAjB,EAAwB,EAAxB,CAAX;AACAd,EAAAA,KAAK,CAACe,IAAN,GAAaC,GAAG,CAACC,eAAJ,CAAoBd,IAApB,CAAb;AACAH,EAAAA,KAAK,CAACkB,YAAN,CAAmB,UAAnB,EAA+BL,QAA/B,EAVyC,CAUA;;AACzCZ,EAAAA,QAAQ,CAACkB,IAAT,CAAcC,WAAd,CAA0BpB,KAA1B;AACAA,EAAAA,KAAK,CAACqB,KAAN;AACApB,EAAAA,QAAQ,CAACkB,IAAT,CAAcC,WAAd,CAA0BpB,KAA1B;AACD","sourcesContent":["import axios from 'axios'\nimport { getToken } from '@/utils/auth'\n\nconst mimeMap = {\n  xlsx: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n  zip: 'application/zip'\n}\n\nconst baseUrl = process.env.VUE_APP_BASE_API\nexport function downLoadZip(str, filename) {\n  var url = baseUrl + str\n  axios({\n    method: 'get',\n    url: url,\n    responseType: 'blob',\n    headers: { 'Authorization': 'Bearer ' + getToken() }\n  }).then(res => {\n    resolveBlob(res, mimeMap.zip)\n  })\n}\n/**\n * 解析blob响应内容并下载\n * @param {*} res blob响应内容\n * @param {String} mimeType MIME类型\n */\nexport function resolveBlob(res, mimeType) {\n  const aLink = document.createElement('a')\n  var blob = new Blob([res.data], { type: mimeType })\n  // //从response的headers中获取filename, 后端response.setHeader(\"Content-disposition\", \"attachment; filename=xxxx.docx\") 设置的文件名;\n  var patt = new RegExp('filename=([^;]+\\\\.[^\\\\.;]+);*')\n  var contentDisposition = decodeURI(res.headers['content-disposition'])\n  var result = patt.exec(contentDisposition)\n  var fileName = result[1]\n  fileName = fileName.replace(/\\\"/g, '')\n  aLink.href = URL.createObjectURL(blob)\n  aLink.setAttribute('download', fileName) // 设置下载文件名称\n  document.body.appendChild(aLink)\n  aLink.click()\n  document.body.appendChild(aLink)\n}\n"]}]}