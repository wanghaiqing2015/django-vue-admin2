{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\src\\views\\vadmin\\monitor\\celery\\crontab-task\\edit-form-crontab-task.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\src\\views\\vadmin\\monitor\\celery\\crontab-task\\edit-form-crontab-task.vue","mtime":1620833396827},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIFN5bmNEYXRhQXBpIGZyb20gIkAvYXBpL3ZhZG1pbi9tb25pdG9yL2NlbGVyeSI7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgZW50aXR5OiB7IHR5cGU6IE9iamVjdCwgZGVmYXVsdDogbnVsbCB9LAogICAgdmFsdWU6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogbnVsbCB9LAogICAgY3JlYXRlOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0sCiAgICB3aWR0aDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICc1MCUnIH0sCiAgICB0YWdzOiB7IHR5cGU6IEFycmF5LCBkZWZhdWx0OiAoKSA9PiBbXSB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBmb3JtOiB7CiAgICAgICAgaW5zdGFuY2VJZDogJycsCiAgICAgICAgbWludXRlOiAnKicsCiAgICAgICAgaG91cjogJyonLAogICAgICAgIGRheV9vZl93ZWVrOiAnKicsCiAgICAgICAgZGF5X29mX21vbnRoOiAnKicsCiAgICAgICAgbW9udGhfb2ZfeWVhcjogJyonCiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgZGlhbG9nVGl0bGUoKSB7CiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZSA/ICfmlrDlop7ku7vliqHlrprml7YnIDogJ+e8lui+keS7u+WKoeWumuaXtic7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdmFsdWUodmFsKSB7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHZhbDsKICAgIH0sCiAgICBkaWFsb2dWaXNpYmxlKHZhbCkgewogICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHZhbCk7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogIH0sCiAgbWV0aG9kczogewogICAgZGlhbG9nT3BlbigpIHsKICAgICAgLy8g5Li6VHJ1ZeaEj+WRs+edgOaYr+mAmui/h+mBjeWPiuaWueW8j+aJk+W8gOWvueivneahhgogICAgICBpZiAoIXRoaXMuY3JlYXRlKSB7CiAgICAgICAgdGhpcy5mb3JtID0geyAuLi50aGlzLmVudGl0eSB9OwogICAgICB9CiAgICB9LAogICAgaGFuZGxlU3VibWl0KCkgewogICAgICB0aGlzLiRyZWZzWydmb3JtJ10udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgY29uc3QgZGF0YSA9IHsgLi4udGhpcy5mb3JtIH07CiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmZvcm0pOwogICAgICAgICAgaWYgKHRoaXMuY3JlYXRlKSB7CiAgICAgICAgICAgIGRlbGV0ZSBkYXRhWydpbnN0YW5jZUlkJ107CiAgICAgICAgICAgIFN5bmNEYXRhQXBpLmNyZWF0ZUNyb250YWJTY2hlZHVsZShkYXRhKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdzdWNjZXNzJywgcmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgdGhpcy5kaWFsb2dDbG9zZSgpOwogICAgICAgICAgICAgIHRoaXMubXNnU3VjY2Vzcygn5paw5aKe5oiQ5YqfIScpOwogICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgU3luY0RhdGFBcGkudXBkYXRlQ3JvbnRhYlNjaGVkdWxlKGRhdGEpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3N1Y2Nlc3MnLCByZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICB0aGlzLm1zZ1N1Y2Nlc3MoJ+abtOaWsOaIkOWKnyEnKTsKICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Nsb3NlKCk7CiAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGRpYWxvZ0Nsb3NlKCkgewogICAgICB0aGlzLiRyZWZzWydmb3JtJ10ucmVzZXRGaWVsZHMoKTsKICAgICAgdGhpcy4kcGFyZW50LmluaXREYXRhKCk7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["edit-form-crontab-task.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"edit-form-crontab-task.vue","sourceRoot":"src/views/vadmin/monitor/celery/crontab-task","sourcesContent":["<!--\n@author: xuchi\n@description: 接口编辑组件\n-->\n<template>\n  <small-dialog\n    ref=\"dialog\"\n    v-model=\"dialogVisible\"\n    :dialog-title=\"dialogTitle\"\n    :width=\"width\"\n    icon=\"svg:icon-interface\"\n    @confirm=\"handleSubmit\"\n    @closed=\"dialogClose\"\n    @opened=\"dialogOpen\">\n    <el-form v-loading=\"loading\" ref=\"form\" :model=\"form\" :size=\"$ELEMENT.size\" label-width=\"120px\">\n      <el-form-item v-show=\"false\" prop=\"instanceId\" label=\"instanceId\" style=\"width: 200px;\">\n        <el-input v-model=\"form.instanceId\" readonly/>\n      </el-form-item>\n      <el-form-item prop=\"minute\" label=\"分钟:\">\n        <el-input v-model=\"form.minute\" placeholder=\"默认: * \"/>\n      </el-form-item>\n      <el-form-item prop=\"hour\" label=\"小时:\">\n        <el-input v-model=\"form.hour\" placeholder=\"默认: * \"/>\n      </el-form-item>\n      <el-form-item prop=\"day_of_week\" label=\"每周的周几\">\n        <el-input v-model=\"form.day_of_week\" placeholder=\"默认: * \"/>\n      </el-form-item>\n      <el-form-item prop=\"day_of_month\" label=\"每月的某天\">\n        <el-input v-model=\"form.day_of_month\" placeholder=\"默认: * \"/>\n      </el-form-item>\n      <el-form-item prop=\"month_of_year\" label=\"每年的某月\">\n        <el-input v-model=\"form.month_of_year\" placeholder=\"默认: * \"/>\n      </el-form-item>\n    </el-form>\n  </small-dialog>\n</template>\n<script>\n  import * as SyncDataApi from \"@/api/vadmin/monitor/celery\";\n  export default {\n    props: {\n      entity: { type: Object, default: null },\n      value: { type: Boolean, default: null },\n      create: { type: Boolean, default: false },\n      width: { type: String, default: '50%' },\n      tags: { type: Array, default: () => [] }\n    },\n    data() {\n      return {\n        loading: false,\n        dialogVisible: false,\n        form: {\n          instanceId: '',\n          minute: '*',\n          hour: '*',\n          day_of_week: '*',\n          day_of_month: '*',\n          month_of_year: '*'\n        }\n      };\n    },\n    computed: {\n      dialogTitle() {\n        return this.create ? '新增任务定时' : '编辑任务定时';\n      }\n    },\n    watch: {\n      value(val) {\n        this.dialogVisible = val;\n      },\n      dialogVisible(val) {\n        this.$emit('input', val);\n      }\n    },\n    created() {\n    },\n    methods: {\n      dialogOpen() {\n        // 为True意味着是通过遍及方式打开对话框\n        if (!this.create) {\n          this.form = { ...this.entity };\n        }\n      },\n      handleSubmit() {\n        this.$refs['form'].validate((valid) => {\n          if (valid) {\n            this.loading = true;\n            const data = { ...this.form };\n            console.log(this.form);\n            if (this.create) {\n              delete data['instanceId'];\n              SyncDataApi.createCrontabSchedule(data).then(response => {\n                this.loading = false;\n                this.$emit('success', response.data);\n                this.dialogClose();\n                this.msgSuccess('新增成功!');\n              }).catch(() => {\n                this.loading = false;\n              });\n            } else {\n              SyncDataApi.updateCrontabSchedule(data).then(response => {\n                this.$emit('success', response.data);\n                this.loading = false;\n                this.msgSuccess('更新成功!');\n                this.dialogClose();\n              }).catch(() => {\n                this.loading = false;\n              });\n            }\n          } else {\n            return false;\n          }\n        });\n      },\n      dialogClose() {\n        this.$refs['form'].resetFields();\n        this.$parent.initData();\n        this.dialogVisible = false;\n      }\n    }\n  };\n</script>\n\n"]}]}