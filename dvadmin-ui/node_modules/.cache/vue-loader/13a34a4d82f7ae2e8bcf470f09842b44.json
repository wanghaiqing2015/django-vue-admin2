{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\src\\views\\vadmin\\system\\message\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\src\\views\\vadmin\\system\\message\\index.vue","mtime":1620833396858},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7YWRkTWVzc2FnZSwgZGVsTWVzc2FnZSwgZXhwb3J0TWVzc2FnZSwgZ2V0TWVzc2FnZSwgbGlzdE1lc3NhZ2UsIHVwZGF0ZU1lc3NhZ2V9IGZyb20gIkAvYXBpL3ZhZG1pbi9zeXN0ZW0vbWVzc2FnZSI7CmltcG9ydCBFZGl0b3IgZnJvbSAnQC9jb21wb25lbnRzL0VkaXRvcic7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk1lc3NhZ2UiLAogIGNvbXBvbmVudHM6IHsKICAgIEVkaXRvcgogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOmBrue9qeWxggogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAvLyDpgInkuK3mlbDnu4QKICAgICAgaWRzOiBbXSwKICAgICAgLy8g6Z2e5Y2V5Liq56aB55SoCiAgICAgIHNpbmdsZTogdHJ1ZSwKICAgICAgLy8g6Z2e5aSa5Liq56aB55SoCiAgICAgIG11bHRpcGxlOiB0cnVlLAogICAgICAvLyDmmL7npLrmkJzntKLmnaHku7YKICAgICAgc2hvd1NlYXJjaDogdHJ1ZSwKICAgICAgLy8g5oC75p2h5pWwCiAgICAgIHRvdGFsOiAwLAogICAgICAvLyDlhazlkYrooajmoLzmlbDmja4KICAgICAgY29uZmlnTGlzdDogW10sCiAgICAgIC8vIOW8ueWHuuWxguagh+mimAogICAgICB0aXRsZTogIiIsCiAgICAgIC8vIOaYr+WQpuaYvuekuuW8ueWHuuWxggogICAgICBvcGVuOiBmYWxzZSwKICAgICAgLy8g5YWs5ZGK57G75Z6L5a2X5YW4CiAgICAgIE1lc3NhZ2VQdXNoVHlwZU9wdGlvbnM6IFtdLAogICAgICAvLyDlhazlkYrnirbmgIHlrZflhbgKICAgICAgTWVzc2FnZVB1c2hTdGF0dXNPcHRpb25zOiBbXSwKICAgICAgLy8g5p+l6K+i5YWs5ZGKCiAgICAgIHF1ZXJ5UGFyYW1zOiB7CiAgICAgICAgcGFnZU51bTogMSwKICAgICAgICBwYWdlU2l6ZTogMTAsCiAgICAgICAgdGl0bGU6IHVuZGVmaW5lZCwKICAgICAgICBjb250ZW50OiB1bmRlZmluZWQsCiAgICAgICAgbWVzc2FnZV90eXBlOiB1bmRlZmluZWQsCiAgICAgICAgaXNfcmV2aWV3ZWQ6IHVuZGVmaW5lZCwKICAgICAgICBzdGF0dXM6IHVuZGVmaW5lZAogICAgICB9LAogICAgICAvLyDooajljZXlhazlkYoKICAgICAgZm9ybToge30sCiAgICAgIC8vIOihqOWNleagoemqjAogICAgICBydWxlczogewogICAgICAgIHRpdGxlOiBbCiAgICAgICAgICB7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLlhazlkYrmoIfpopjkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciJ9CiAgICAgICAgXSwKICAgICAgICBjb250ZW50OiBbCiAgICAgICAgICB7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLlhazlkYrlhoXlrrnkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciJ9CiAgICAgICAgXSwKICAgICAgICB0b19wYXRoOiBbCiAgICAgICAgICB7cmVxdWlyZWQ6IGZhbHNlLCBtZXNzYWdlOiAi6Lez6L2s6Lev5b6E5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIifQogICAgICAgIF0KICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKTsKICAgIHRoaXMuZ2V0RGljdHMoInN5c19tZXNzYWdlX3B1c2hfdHlwZSIpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICB0aGlzLk1lc3NhZ2VQdXNoVHlwZU9wdGlvbnMgPSByZXNwb25zZS5kYXRhOwogICAgfSk7CiAgICB0aGlzLmdldERpY3RzKCJzeXNfbWVzc2FnZV9wdXNoX3N0YXR1cyIpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICB0aGlzLk1lc3NhZ2VQdXNoU3RhdHVzT3B0aW9ucyA9IHJlc3BvbnNlLmRhdGE7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8qKiDmn6Xor6LlhazlkYrliJfooaggKi8KICAgIGdldExpc3QoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIGxpc3RNZXNzYWdlKHRoaXMuYWRkRGF0ZVJhbmdlKHRoaXMucXVlcnlQYXJhbXMpKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMuY29uZmlnTGlzdCA9IHJlc3BvbnNlLmRhdGEucmVzdWx0czsKICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLmNvdW50OwogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfQogICAgICApOwogICAgfSwKICAgIC8vIOWFrOWRiuexu+Wei+Wtl+WFuOe/u+ivkQogICAgdHlwZUZvcm1hdChyb3csIGNvbHVtbikgewogICAgICByZXR1cm4gdGhpcy5zZWxlY3REaWN0TGFiZWwodGhpcy5NZXNzYWdlUHVzaFR5cGVPcHRpb25zLCByb3cubWVzc2FnZV90eXBlKTsKICAgIH0sCiAgICAvLyDlhazlkYrnirbmgIHlrZflhbjnv7vor5EKICAgIHN0YXR1c0Zvcm1hdChyb3csIGNvbHVtbikgewogICAgICByZXR1cm4gdGhpcy5zZWxlY3REaWN0TGFiZWwodGhpcy5NZXNzYWdlUHVzaFN0YXR1c09wdGlvbnMsIHJvdy5zdGF0dXMpOwogICAgfSwKICAgIC8vIOWFrOWRiueKtuaAgeWtl+WFuOe/u+ivkQogICAgaXNSZXZpZXdlZEZvcm1hdChyb3csIGNvbHVtbikgewogICAgICByZXR1cm4gcm93LmlzX3Jldmlld2VkID09PSB0cnVlID8gJ+aYrycgOiAn5ZCmJwogICAgfSwKICAgIC8vIOWPlua2iOaMiemSrgogICAgY2FuY2VsKCkgewogICAgICB0aGlzLm9wZW4gPSBmYWxzZTsKICAgICAgdGhpcy5yZXNldCgpOwogICAgfSwKICAgIC8vIOihqOWNlemHjee9rgogICAgcmVzZXQoKSB7CiAgICAgIHRoaXMuZm9ybSA9IHsKICAgICAgICBpZDogdW5kZWZpbmVkLAogICAgICAgIHRpdGxlOiB1bmRlZmluZWQsCiAgICAgICAgY29udGVudDogdW5kZWZpbmVkLAogICAgICAgIHRvX3BhdGg6IHVuZGVmaW5lZCwKICAgICAgICBpc19yZXZpZXdlZDogdHJ1ZSwKICAgICAgICBtZXNzYWdlX3R5cGU6IHRoaXMuc2VsZWN0RGljdERlZmF1bHQodGhpcy5NZXNzYWdlUHVzaFN0YXR1c09wdGlvbnMpLAogICAgICAgIHN0YXR1czogdGhpcy5zZWxlY3REaWN0RGVmYXVsdCh0aGlzLk1lc3NhZ2VQdXNoU3RhdHVzT3B0aW9ucyksCiAgICAgIH07CiAgICAgIHRoaXMucmVzZXRGb3JtKCJmb3JtIik7CiAgICB9LAogICAgLyoqIOaQnOe0ouaMiemSruaTjeS9nCAqLwogICAgaGFuZGxlUXVlcnkoKSB7CiAgICAgIHRoaXMucXVlcnlQYXJhbXMucGFnZU51bSA9IDE7CiAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgfSwKICAgIC8qKiDph43nva7mjInpkq7mk43kvZwgKi8KICAgIHJlc2V0UXVlcnkoKSB7CiAgICAgIHRoaXMucmVzZXRGb3JtKCJxdWVyeUZvcm0iKTsKICAgICAgdGhpcy5oYW5kbGVRdWVyeSgpOwogICAgfSwKICAgIC8qKiDmlrDlop7mjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZUFkZCgpIHsKICAgICAgdGhpcy5yZXNldCgpOwogICAgICB0aGlzLm9wZW4gPSB0cnVlOwogICAgICB0aGlzLnRpdGxlID0gIuWPkeW4g+WFrOWRiiI7CiAgICB9LAogICAgLy8g5aSa6YCJ5qGG6YCJ5Lit5pWw5o2uCiAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2Uoc2VsZWN0aW9uKSB7CiAgICAgIHRoaXMuaWRzID0gc2VsZWN0aW9uLm1hcChpdGVtID0+IGl0ZW0uaWQpCiAgICAgIHRoaXMuc2luZ2xlID0gc2VsZWN0aW9uLmxlbmd0aCAhPSAxCiAgICAgIHRoaXMubXVsdGlwbGUgPSAhc2VsZWN0aW9uLmxlbmd0aAogICAgfSwKICAgIC8qKiDkv67mlLnmjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZVVwZGF0ZShyb3cpIHsKICAgICAgdGhpcy5yZXNldCgpOwogICAgICBjb25zdCBpZCA9IHJvdy5pZCB8fCB0aGlzLmlkcwogICAgICBnZXRNZXNzYWdlKGlkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmZvcm0gPSByZXNwb25zZS5kYXRhOwogICAgICAgIHRoaXMub3BlbiA9IHRydWU7CiAgICAgICAgdGhpcy50aXRsZSA9ICLkv67mlLnlhazlkYoiOwogICAgICB9KTsKICAgIH0sCiAgICAvKiog5o+Q5Lqk5oyJ6ZKuICovCiAgICBzdWJtaXRGb3JtOiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuJHJlZnNbImZvcm0iXS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBpZiAodGhpcy5mb3JtLmlkICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICB1cGRhdGVNZXNzYWdlKHRoaXMuZm9ybSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5tc2dTdWNjZXNzKCLkv67mlLnmiJDlip8iKTsKICAgICAgICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZTsKICAgICAgICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhZGRNZXNzYWdlKHRoaXMuZm9ybSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5tc2dTdWNjZXNzKCLmlrDlop7miJDlip8iKTsKICAgICAgICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZTsKICAgICAgICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvKiog5Yig6Zmk5oyJ6ZKu5pON5L2cICovCiAgICBoYW5kbGVEZWxldGUocm93KSB7CiAgICAgIGNvbnN0IGNvbmZpZ0lkcyA9IHJvdy5pZCB8fCB0aGlzLmlkczsKICAgICAgdGhpcy4kY29uZmlybSgn5piv5ZCm56Gu6K6k5Yig6Zmk5YWs5ZGK57yW5Y+35Li6IicgKyBjb25maWdJZHMgKyAnIueahOaVsOaNrumhuT8nLCAi6K2m5ZGKIiwgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwKICAgICAgICB0eXBlOiAid2FybmluZyIKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIGRlbE1lc3NhZ2UoY29uZmlnSWRzKTsKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICAgICAgdGhpcy5tc2dTdWNjZXNzKCLliKDpmaTmiJDlip8iKTsKICAgICAgfSkKICAgIH0sCiAgICAvKiog5a+85Ye65oyJ6ZKu5pON5L2cICovCiAgICBoYW5kbGVFeHBvcnQoKSB7CiAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gdGhpcy5xdWVyeVBhcmFtczsKICAgICAgdGhpcy4kY29uZmlybSgn5piv5ZCm56Gu6K6k5a+85Ye65omA5pyJ5pWw5o2u6aG5PycsICLorablkYoiLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLAogICAgICAgIHR5cGU6ICJ3YXJuaW5nIgogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gZXhwb3J0TWVzc2FnZShxdWVyeVBhcmFtcyk7CiAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMuZG93bmxvYWQocmVzcG9uc2UuZGF0YS5maWxlX3VybCwgcmVzcG9uc2UuZGF0YS5uYW1lKTsKICAgICAgfSkKICAgIH0sCiAgfQp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4MA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/vadmin/system/message","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :model=\"queryParams\" ref=\"queryForm\" :inline=\"true\" v-show=\"showSearch\" label-width=\"68px\">\n      <el-form-item label=\"公告标题\" prop=\"title\">\n        <el-input\n          v-model=\"queryParams.title\"\n          placeholder=\"请输入公告标题\"\n          clearable\n          size=\"small\"\n          style=\"width: 240px\"\n          @keyup.enter.native=\"handleQuery\"\n        />\n      </el-form-item>\n      <el-form-item label=\"公告类型\" prop=\"message_type\">\n        <el-select v-model=\"queryParams.message_type\" placeholder=\"公告类型\" clearable size=\"small\">\n          <el-option\n            v-for=\"dict in MessagePushTypeOptions\"\n            :key=\"dict.dictValue\"\n            :label=\"dict.dictLabel\"\n            :value=\"dict.dictValue\"\n          />\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"公告状态\" prop=\"status\">\n        <el-select v-model=\"queryParams.status\" placeholder=\"公告状态\" clearable size=\"small\">\n          <el-option\n            v-for=\"dict in MessagePushStatusOptions\"\n            :key=\"dict.dictValue\"\n            :label=\"dict.dictLabel\"\n            :value=\"dict.dictValue\"\n          />\n        </el-select>\n      </el-form-item>\n      <!--      <el-form-item label=\"是否审核\" prop=\"is_reviewed\">-->\n      <!--        <el-select v-model=\"queryParams.is_reviewed\" placeholder=\"是否审核\" clearable size=\"small\">-->\n      <!--          <el-option :key=\"true\" label=\"是\" :value=\"true\"/>-->\n      <!--          <el-option :key=\"false\" label=\"否\" :value=\"false\"/>-->\n      <!--        </el-select>-->\n      <!--      </el-form-item>-->\n      <el-form-item>\n        <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n      </el-form-item>\n    </el-form>\n\n    <el-row :gutter=\"10\" class=\"mb8\">\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"primary\"\n          plain\n          icon=\"el-icon-plus\"\n          size=\"mini\"\n          @click=\"handleAdd\"\n          v-hasPermi=\"['system:message:post']\"\n        >发布公告\n        </el-button>\n      </el-col>\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"success\"\n          plain\n          icon=\"el-icon-edit\"\n          size=\"mini\"\n          :disabled=\"single\"\n          @click=\"handleUpdate\"\n          v-hasPermi=\"['system:message:{id}:put']\"\n        >修改公告\n        </el-button>\n      </el-col>\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"danger\"\n          plain\n          icon=\"el-icon-delete\"\n          size=\"mini\"\n          :disabled=\"multiple\"\n          @click=\"handleDelete\"\n          v-hasPermi=\"['permission:menu:{id}:delete']\"\n        >删除公告\n        </el-button>\n      </el-col>\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"warning\"\n          plain\n          icon=\"el-icon-download\"\n          size=\"mini\"\n          @click=\"handleExport\"\n          v-hasPermi=\"['system:message:export:get']\"\n        >导出\n        </el-button>\n      </el-col>\n      <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\n    </el-row>\n\n    <el-table v-loading=\"loading\" :data=\"configList\" @selection-change=\"handleSelectionChange\">\n      <el-table-column type=\"selection\" width=\"55\" align=\"center\"/>\n      <el-table-column label=\"公告主键\" align=\"center\" prop=\"id\"/>\n      <el-table-column label=\"公告标题\" align=\"center\" prop=\"title\" :show-overflow-tooltip=\"true\"/>\n      <el-table-column label=\"公告内容\" align=\"center\" prop=\"content\" :show-overflow-tooltip=\"true\"/>\n      <el-table-column label=\"公告类型\" align=\"center\" prop=\"message_type\" :formatter=\"typeFormat\"/>\n      <!--      <el-table-column label=\"是否审核通过\" align=\"center\" prop=\"is_reviewed\" :formatter=\"isReviewedFormat\"/>-->\n      <el-table-column label=\"公告状态\" align=\"center\" prop=\"status\" :formatter=\"statusFormat\"/>\n      <el-table-column label=\"跳转路径\" align=\"center\" prop=\"to_path\" :show-overflow-tooltip=\"true\"/>\n      <el-table-column label=\"创建时间\" align=\"center\" prop=\"create_datetime\" width=\"180\">\n        <template slot-scope=\"scope\">\n          <span>{{ parseTime(scope.row.create_datetime) }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column\n        label=\"操作\"\n        align=\"center\"\n        class-name=\"small-padding fixed-width\"\n        v-if=\"hasPermi(['system:message:{id}:put','permission:menu:{id}:delete'])\">\n        <template slot-scope=\"scope\">\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-edit\"\n            @click=\"handleUpdate(scope.row)\"\n            v-hasPermi=\"['system:message:{id}:put']\"\n          >修改\n          </el-button>\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-delete\"\n            @click=\"handleDelete(scope.row)\"\n            v-hasPermi=\"['permission:menu:{id}:delete']\"\n          >删除\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <pagination\n      v-show=\"total>0\"\n      :total=\"total\"\n      :page.sync=\"queryParams.pageNum\"\n      :limit.sync=\"queryParams.pageSize\"\n      @pagination=\"getList\"\n    />\n\n    <!-- 添加或修改公告配置对话框 -->\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"780px\" append-to-body>\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\n        <el-row>\n          <el-col :span=\"12\">\n            <el-form-item label=\"公告标题\" prop=\"title\">\n              <el-input v-model=\"form.title\" placeholder=\"请输入公告标题\"/>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"跳转路径\" prop=\"to_path\">\n              <el-input v-model=\"form.to_path\" placeholder=\"请输入跳转路径\"/>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"状态\" prop=\"status\">\n              <el-radio-group v-model=\"form.status\">\n                <el-radio\n                  v-for=\"dict in MessagePushStatusOptions\"\n                  :key=\"dict.dictValue\"\n                  :label=\"dict.dictValue\"\n                >{{dict.dictLabel}}\n                </el-radio>\n              </el-radio-group>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"公告类型\" prop=\"message_type\">\n              <el-select v-model=\"form.message_type\" placeholder=\"请选择\">\n                <el-option\n                  v-for=\"dict in MessagePushTypeOptions\"\n                  :key=\"dict.dictValue\"\n                  :label=\"dict.dictLabel\"\n                  :value=\"dict.dictValue\"\n                ></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"公告内容\" prop=\"content\">\n              <editor v-model=\"form.content\" :min-height=\"192\"/>\n            </el-form-item>\n          </el-col>\n\n          <!--        <el-form-item label=\"是否审核\" prop=\"is_reviewed\">-->\n          <!--          <el-radio-group v-model=\"form.is_reviewed\">-->\n          <!--            <el-radio :label=\"true\">是</el-radio>-->\n          <!--            <el-radio :label=\"false\">否</el-radio>-->\n          <!--          </el-radio-group>-->\n          <!--        </el-form-item>-->\n        </el-row>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\n        <el-button @click=\"cancel\">取 消</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import {addMessage, delMessage, exportMessage, getMessage, listMessage, updateMessage} from \"@/api/vadmin/system/message\";\n  import Editor from '@/components/Editor';\n\n  export default {\n    name: \"Message\",\n    components: {\n      Editor\n    },\n    data() {\n      return {\n        // 遮罩层\n        loading: true,\n        // 选中数组\n        ids: [],\n        // 非单个禁用\n        single: true,\n        // 非多个禁用\n        multiple: true,\n        // 显示搜索条件\n        showSearch: true,\n        // 总条数\n        total: 0,\n        // 公告表格数据\n        configList: [],\n        // 弹出层标题\n        title: \"\",\n        // 是否显示弹出层\n        open: false,\n        // 公告类型字典\n        MessagePushTypeOptions: [],\n        // 公告状态字典\n        MessagePushStatusOptions: [],\n        // 查询公告\n        queryParams: {\n          pageNum: 1,\n          pageSize: 10,\n          title: undefined,\n          content: undefined,\n          message_type: undefined,\n          is_reviewed: undefined,\n          status: undefined\n        },\n        // 表单公告\n        form: {},\n        // 表单校验\n        rules: {\n          title: [\n            {required: true, message: \"公告标题不能为空\", trigger: \"blur\"}\n          ],\n          content: [\n            {required: true, message: \"公告内容不能为空\", trigger: \"blur\"}\n          ],\n          to_path: [\n            {required: false, message: \"跳转路径不能为空\", trigger: \"blur\"}\n          ]\n        }\n      };\n    },\n    created() {\n      this.getList();\n      this.getDicts(\"sys_message_push_type\").then(response => {\n        this.MessagePushTypeOptions = response.data;\n      });\n      this.getDicts(\"sys_message_push_status\").then(response => {\n        this.MessagePushStatusOptions = response.data;\n      });\n    },\n    methods: {\n      /** 查询公告列表 */\n      getList() {\n        this.loading = true;\n        listMessage(this.addDateRange(this.queryParams)).then(response => {\n            this.configList = response.data.results;\n            this.total = response.data.count;\n            this.loading = false;\n          }\n        );\n      },\n      // 公告类型字典翻译\n      typeFormat(row, column) {\n        return this.selectDictLabel(this.MessagePushTypeOptions, row.message_type);\n      },\n      // 公告状态字典翻译\n      statusFormat(row, column) {\n        return this.selectDictLabel(this.MessagePushStatusOptions, row.status);\n      },\n      // 公告状态字典翻译\n      isReviewedFormat(row, column) {\n        return row.is_reviewed === true ? '是' : '否'\n      },\n      // 取消按钮\n      cancel() {\n        this.open = false;\n        this.reset();\n      },\n      // 表单重置\n      reset() {\n        this.form = {\n          id: undefined,\n          title: undefined,\n          content: undefined,\n          to_path: undefined,\n          is_reviewed: true,\n          message_type: this.selectDictDefault(this.MessagePushStatusOptions),\n          status: this.selectDictDefault(this.MessagePushStatusOptions),\n        };\n        this.resetForm(\"form\");\n      },\n      /** 搜索按钮操作 */\n      handleQuery() {\n        this.queryParams.pageNum = 1;\n        this.getList();\n      },\n      /** 重置按钮操作 */\n      resetQuery() {\n        this.resetForm(\"queryForm\");\n        this.handleQuery();\n      },\n      /** 新增按钮操作 */\n      handleAdd() {\n        this.reset();\n        this.open = true;\n        this.title = \"发布公告\";\n      },\n      // 多选框选中数据\n      handleSelectionChange(selection) {\n        this.ids = selection.map(item => item.id)\n        this.single = selection.length != 1\n        this.multiple = !selection.length\n      },\n      /** 修改按钮操作 */\n      handleUpdate(row) {\n        this.reset();\n        const id = row.id || this.ids\n        getMessage(id).then(response => {\n          this.form = response.data;\n          this.open = true;\n          this.title = \"修改公告\";\n        });\n      },\n      /** 提交按钮 */\n      submitForm: function () {\n        this.$refs[\"form\"].validate(valid => {\n          if (valid) {\n            if (this.form.id != undefined) {\n              updateMessage(this.form).then(response => {\n                this.msgSuccess(\"修改成功\");\n                this.open = false;\n                this.getList();\n              });\n            } else {\n              addMessage(this.form).then(response => {\n                this.msgSuccess(\"新增成功\");\n                this.open = false;\n                this.getList();\n              });\n            }\n          }\n        });\n      },\n      /** 删除按钮操作 */\n      handleDelete(row) {\n        const configIds = row.id || this.ids;\n        this.$confirm('是否确认删除公告编号为\"' + configIds + '\"的数据项?', \"警告\", {\n          confirmButtonText: \"确定\",\n          cancelButtonText: \"取消\",\n          type: \"warning\"\n        }).then(function () {\n          return delMessage(configIds);\n        }).then(() => {\n          this.getList();\n          this.msgSuccess(\"删除成功\");\n        })\n      },\n      /** 导出按钮操作 */\n      handleExport() {\n        const queryParams = this.queryParams;\n        this.$confirm('是否确认导出所有数据项?', \"警告\", {\n          confirmButtonText: \"确定\",\n          cancelButtonText: \"取消\",\n          type: \"warning\"\n        }).then(function () {\n          return exportMessage(queryParams);\n        }).then(response => {\n          this.download(response.data.file_url, response.data.name);\n        })\n      },\n    }\n  };\n</script>\n"]}]}