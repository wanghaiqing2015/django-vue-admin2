{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\src\\views\\vadmin\\monitor\\operlog\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\src\\views\\vadmin\\monitor\\operlog\\index.vue","mtime":1620833396842},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNsZWFuT3BlcmF0aW9uTG9nLCBkZWxPcGVyYXRpb25Mb2csIGV4cG9ydE9wZXJhdGlvbkxvZywgbGlzdCB9IGZyb20gJ0AvYXBpL3ZhZG1pbi9zeXN0ZW0vb3BlcmF0aW9ubG9nJwppbXBvcnQgRGV0YWlsRm9ybURpYWxvZyBmcm9tICdAL2NvbXBvbmVudHMvTW9kYWwvRGV0YWlsRm9ybURpYWxvZycKaW1wb3J0IGxvZyBmcm9tICcuLi9qb2IvbG9nJwoKY29uc3QgT1BFUkFUSU9OX0xPR19GT1JNX0lURU0gPSBbCiAgewogICAgaW5kZXg6IDEsCiAgICBsYWJlbDogJ+aTjeS9nOaooeWdlycsCiAgICBrZXk6ICdjdXN0b21SZXF1ZXN0TW9kdWxhcicsCiAgICBjdXN0b21SZW5kZXI6IHRydWUsCiAgICBzaW5nbGVMaW5lOiB0cnVlCiAgfSwKICB7CiAgICBpbmRleDogMiwKICAgIGxhYmVsOiAn55m75b2V5L+h5oGvJywKICAgIGtleTogJ2N1c3RvbUxvZ2luSW5mbycsCiAgICBjdXN0b21SZW5kZXI6IHRydWUsCiAgICBzaW5nbGVMaW5lOiB0cnVlCiAgfSwKICB7CiAgICBpbmRleDogMywKICAgIGxhYmVsOiAn6K+35rGC5Zyw5Z2AJywKICAgIGtleTogJ3JlcXVlc3RfcGF0aCcKICB9LAogIHsKICAgIGluZGV4OiA0LAogICAgbGFiZWw6ICfor7fmsYLlj4LmlbAnLAogICAga2V5OiAncmVxdWVzdF9ib2R5JywKICAgIHNpbmdsZUxpbmU6IHRydWUKICB9LAogIHsKICAgIGluZGV4OiA1LAogICAgbGFiZWw6ICfov5Tlm57lj4LmlbAnLAogICAga2V5OiAnanNvbl9yZXN1bHQnCiAgfSwKICB7CiAgICBpbmRleDogNiwKICAgIGxhYmVsOiAn6L+U5Zue54q25oCB56CBJywKICAgIGtleTogJ3Jlc3BvbnNlX2NvZGUnCiAgfSwKICB7CiAgICBpbmRleDogNywKICAgIGxhYmVsOiAn5pON5L2c54q25oCBJywKICAgIGtleTogJ3N0YXR1cycsCiAgICBsYWJlbFR5cGU6ICdib29sZWFuJywKICAgIGxhYmVsQ2hvaWNlczogewogICAgICBmYWxzZTogJ+Wksei0pScsCiAgICAgIHRydWU6ICfmraPluLgnCiAgICB9CiAgfSwKICB7CiAgICBpbmRleDogOCwKICAgIGxhYmVsOiAn5Lu75Yqh57uT5p6cJywKICAgIGtleTogJ3Jlc3VsdCcsCiAgICBzaW5nbGVMaW5lOiB0cnVlCiAgfSwKICB7CiAgICBpbmRleDogOSwKICAgIGxhYmVsOiAn5pON5L2c5pe26Ze0JywKICAgIGtleTogJ2NyZWF0ZV9kYXRldGltZScsCiAgICBsYWJlbFR5cGU6ICd0aW1lJywKICAgIHNpbmdsZUxpbmU6IHRydWUKICB9Cl0KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnT3BlcmxvZycsCiAgY29tcG9uZW50czogeyBEZXRhaWxGb3JtRGlhbG9nIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOmBrue9qeWxggogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAvLyDpgInkuK3mlbDnu4QKICAgICAgaWRzOiBbXSwKICAgICAgLy8g6Z2e5aSa5Liq56aB55SoCiAgICAgIG11bHRpcGxlOiB0cnVlLAogICAgICAvLyDmmL7npLrmkJzntKLmnaHku7YKICAgICAgc2hvd1NlYXJjaDogdHJ1ZSwKICAgICAgLy8g5oC75p2h5pWwCiAgICAgIHRvdGFsOiAwLAogICAgICAvLyDooajmoLzmlbDmja4KICAgICAgbGlzdDogW10sCiAgICAgIC8vIOaYr+WQpuaYvuekuuW8ueWHuuWxggogICAgICBvcGVuRGV0YWlsTW9kYWw6IGZhbHNlLAogICAgICAvLyDnsbvlnovmlbDmja7lrZflhbgKICAgICAgc3RhdHVzT3B0aW9uczogW3sgZGljdExhYmVsOiAn5oiQ5YqfJywgZGljdFZhbHVlOiB0cnVlIH0sIHsgZGljdExhYmVsOiAn5aSx6LSlJywgZGljdFZhbHVlOiBmYWxzZSB9XSwKICAgICAgLy8g5pel5pyf6IyD5Zu0CiAgICAgIGRhdGVSYW5nZTogW10sCiAgICAgIC8vIOihqOWNleWPguaVsAogICAgICBmb3JtOiB7fSwKICAgICAgZm9ybUl0ZW06IE9QRVJBVElPTl9MT0dfRk9STV9JVEVNLAogICAgICAvLyDmn6Xor6Llj4LmlbAKICAgICAgcXVlcnlQYXJhbXM6IHsKICAgICAgICBwYWdlTnVtOiAxLAogICAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgICByZXF1ZXN0X21vZHVsYXI6IHVuZGVmaW5lZCwKICAgICAgICBjcmVhdG9yX25hbWU6IHVuZGVmaW5lZCwKICAgICAgICBzdGF0dXM6IHVuZGVmaW5lZAogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRMaXN0KCkKICB9LAogIG1ldGhvZHM6IHsKICAgIC8qKiDmn6Xor6LnmbvlvZXml6Xlv5cgKi8KICAgIGdldExpc3QoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWUKICAgICAgbGlzdCh0aGlzLmFkZERhdGVSYW5nZSh0aGlzLnF1ZXJ5UGFyYW1zLCB0aGlzLmRhdGVSYW5nZSkpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRzCiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS5jb3VudAogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICB9CiAgICAgICkKICAgIH0sCiAgICAvLyDmk43kvZzml6Xlv5fnirbmgIHlrZflhbjnv7vor5EKICAgIHN0YXR1c0Zvcm1hdChyb3csIGNvbHVtbikgewogICAgICByZXR1cm4gdGhpcy5zZWxlY3REaWN0TGFiZWwodGhpcy5zdGF0dXNPcHRpb25zLCByb3cuc3RhdHVzKQogICAgfSwKICAgIC8qKiDmkJzntKLmjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZVF1ZXJ5KCkgewogICAgICB0aGlzLnF1ZXJ5UGFyYW1zLnBhZ2VOdW0gPSAxCiAgICAgIHRoaXMuZ2V0TGlzdCgpCiAgICB9LAogICAgLyoqIOmHjee9ruaMiemSruaTjeS9nCAqLwogICAgcmVzZXRRdWVyeSgpIHsKICAgICAgdGhpcy5kYXRlUmFuZ2UgPSBbXQogICAgICB0aGlzLnJlc2V0Rm9ybSgncXVlcnlGb3JtJykKICAgICAgdGhpcy5oYW5kbGVRdWVyeSgpCiAgICB9LAogICAgLy8g5aSa6YCJ5qGG6YCJ5Lit5pWw5o2uCiAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2Uoc2VsZWN0aW9uKSB7CiAgICAgIHRoaXMuaWRzID0gc2VsZWN0aW9uLm1hcChpdGVtID0+IGl0ZW0uaWQpCiAgICAgIHRoaXMubXVsdGlwbGUgPSAhc2VsZWN0aW9uLmxlbmd0aAogICAgfSwKICAgIC8qKiDor6bnu4bmjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZVZpZXcocm93KSB7CiAgICAgIHRoaXMub3BlbkRldGFpbE1vZGFsID0gdHJ1ZQogICAgICB0aGlzLmZvcm0gPSByb3cKICAgIH0sCiAgICAvKiog5Yig6Zmk5oyJ6ZKu5pON5L2cICovCiAgICBoYW5kbGVEZWxldGUocm93KSB7CiAgICAgIGNvbnN0IGlkcyA9IHJvdy5pZCB8fCB0aGlzLmlkcwogICAgICB0aGlzLiRjb25maXJtKCfmmK/lkKbnoa7orqTliKDpmaTml6Xlv5fnvJblj7fkuLoiJyArIGlkcyArICci55qE5pWw5o2u6aG5PycsICforablkYonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBkZWxPcGVyYXRpb25Mb2coaWRzKQogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLmdldExpc3QoKQogICAgICAgIHRoaXMubXNnU3VjY2Vzcygn5Yig6Zmk5oiQ5YqfJykKICAgICAgfSkKICAgIH0sCiAgICAvKiog5riF56m65oyJ6ZKu5pON5L2cICovCiAgICBoYW5kbGVDbGVhbigpIHsKICAgICAgdGhpcy4kY29uZmlybSgn5piv5ZCm56Gu6K6k5riF56m65omA5pyJ5pON5L2c5pel5b+X5pWw5o2u6aG5PycsICforablkYonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBjbGVhbk9wZXJhdGlvbkxvZygpCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuZ2V0TGlzdCgpCiAgICAgICAgdGhpcy5tc2dTdWNjZXNzKCfmuIXnqbrmiJDlip8nKQogICAgICB9KQogICAgfSwKICAgIC8qKiDlr7zlh7rmjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZUV4cG9ydCgpIHsKICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSB0aGlzLnF1ZXJ5UGFyYW1zCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+aYr+WQpuehruiupOWvvOWHuuaJgOacieaTjeS9nOaXpeW/l+aVsOaNrumhuT8nLCAn6K2m5ZGKJywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbihmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gZXhwb3J0T3BlcmF0aW9uTG9nKHF1ZXJ5UGFyYW1zKQogICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmRvd25sb2FkKHJlc3BvbnNlLmRhdGEuZmlsZV91cmwsIHJlc3BvbnNlLmRhdGEubmFtZSkKICAgICAgfSkKICAgIH0sCiAgICBjb25uZWN0RmllbGRzQ29udGVudChmaWVsZHNDb250ZW50LCBzeW1ib2wpIHsKICAgICAgZmllbGRzQ29udGVudC5mb3JFYWNoKChmaWVsZENvbnRlbnQsIGluZGV4KSA9PiB7CiAgICAgICAgaWYgKCFmaWVsZENvbnRlbnQpIHsKICAgICAgICAgIGRlbGV0ZSBmaWVsZHNDb250ZW50W2luZGV4XQogICAgICAgIH0KICAgICAgfSkKICAgICAgcmV0dXJuIGZpZWxkc0NvbnRlbnQuam9pbihzeW1ib2wpCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyJA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/vadmin/monitor/operlog","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :model=\"queryParams\" ref=\"queryForm\" :inline=\"true\" v-show=\"showSearch\" label-width=\"68px\">\n      <el-form-item label=\"系统模块\" prop=\"request_modular\">\n        <el-input\n          v-model=\"queryParams.request_modular\"\n          placeholder=\"请输入系统模块\"\n          clearable\n          style=\"width: 240px;\"\n          size=\"small\"\n          @keyup.enter.native=\"handleQuery\"\n        />\n      </el-form-item>\n      <el-form-item label=\"操作人员\" prop=\"creator_name\">\n        <el-input\n          v-model=\"queryParams.creator_name\"\n          placeholder=\"请输入操作人员\"\n          clearable\n          style=\"width: 240px;\"\n          size=\"small\"\n          @keyup.enter.native=\"handleQuery\"\n        />\n      </el-form-item>\n      <el-form-item label=\"状态\" prop=\"status\">\n        <el-select\n          v-model=\"queryParams.status\"\n          placeholder=\"操作状态\"\n          clearable\n          size=\"small\"\n          style=\"width: 240px\"\n        >\n          <el-option\n            v-for=\"dict in statusOptions\"\n            :key=\"dict.dictValue\"\n            :label=\"dict.dictLabel\"\n            :value=\"dict.dictValue\"\n          />\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"操作时间\">\n        <el-date-picker\n          v-model=\"dateRange\"\n          size=\"small\"\n          style=\"width: 240px\"\n          value-format=\"yyyy-MM-dd HH:mm:ss\"\n          type=\"daterange\"\n          range-separator=\"-\"\n          start-placeholder=\"开始日期\"\n          end-placeholder=\"结束日期\"\n          :default-time=\"['00:00:00', '23:59:59']\"\n        ></el-date-picker>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n      </el-form-item>\n    </el-form>\n\n    <el-row :gutter=\"10\" class=\"mb8\">\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"danger\"\n          plain\n          icon=\"el-icon-delete\"\n          size=\"mini\"\n          :disabled=\"multiple\"\n          @click=\"handleDelete\"\n          v-hasPermi=\"['admin:system:operation_log:{id}:delete']\"\n        >删除\n        </el-button>\n      </el-col>\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"danger\"\n          plain\n          icon=\"el-icon-delete\"\n          size=\"mini\"\n          @click=\"handleClean\"\n          v-hasPermi=\"['admin:system:operation_log:clean:delete']\"\n        >清空\n        </el-button>\n      </el-col>\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"warning\"\n          plain\n          icon=\"el-icon-download\"\n          size=\"mini\"\n          @click=\"handleExport\"\n          v-hasPermi=\"['admin:system:operlog:export:get']\"\n        >导出\n        </el-button>\n      </el-col>\n      <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\n    </el-row>\n\n    <el-table v-loading=\"loading\" :data=\"list\" @selection-change=\"handleSelectionChange\">\n      <el-table-column type=\"selection\" width=\"55\" align=\"center\"/>\n      <el-table-column label=\"日志编号\" align=\"center\" prop=\"id\"/>\n      <el-table-column label=\"系统模块\" align=\"center\" prop=\"request_modular\"/>\n      <el-table-column label=\"请求方式\" align=\"center\" prop=\"request_method\"/>\n      <el-table-column label=\"操作人员\" align=\"center\" prop=\"creator_name\"/>\n      <el-table-column label=\"主机\" align=\"center\" prop=\"request_ip\" width=\"130\" :show-overflow-tooltip=\"true\"/>\n      <el-table-column label=\"操作地点\" align=\"center\" prop=\"request_location\" :show-overflow-tooltip=\"true\"/>\n      <el-table-column label=\"操作状态\" align=\"center\" prop=\"status\" :formatter=\"statusFormat\"/>\n      <el-table-column label=\"操作日期\" align=\"center\" prop=\"create_datetime\" width=\"180\">\n        <template slot-scope=\"scope\">\n          <span>{{ parseTime(scope.row.create_datetime) }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\n        <template slot-scope=\"scope\">\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-view\"\n            @click=\"handleView(scope.row,scope.index)\"\n            v-hasPermi=\"['admin:system:operlog:get']\"\n          >详细\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <pagination\n      v-show=\"total>0\"\n      :total=\"total\"\n      :page.sync=\"queryParams.pageNum\"\n      :limit.sync=\"queryParams.pageSize\"\n      @pagination=\"getList\"\n    />\n\n    <!-- 操作日志详细 -->\n    <!-- 表单类详情dialog-->\n    <detail-form-dialog v-if=\"openDetailModal\"\n                        dialog-title=\"操作日志详细\"\n                        modalWidth=\"700px\"\n                        :openDetailModal=\"openDetailModal\"\n                        :formData=\"form\"\n                        :formItem=\"formItem\"\n                        @closeDialog=\"value=>{openDetailModal=value}\"\n    >\n      <template slot=\"customRequestModular\" slot-scope=\"{item}\">\n        <span>{{connectFieldsContent([form.request_modular, form.request_msg], '/') }}</span>\n      </template>\n      <template slot=\"customLoginInfo\" slot-scope=\"{item}\">\n        <span>{{connectFieldsContent([form.creator_name, form.request_ip, form.request_location, form.request_browser], '/')}}</span>\n      </template>\n    </detail-form-dialog>\n  </div>\n</template>\n\n<script>\n  import { cleanOperationLog, delOperationLog, exportOperationLog, list } from '@/api/vadmin/system/operationlog'\n  import DetailFormDialog from '@/components/Modal/DetailFormDialog'\n  import log from '../job/log'\n\n  const OPERATION_LOG_FORM_ITEM = [\n    {\n      index: 1,\n      label: '操作模块',\n      key: 'customRequestModular',\n      customRender: true,\n      singleLine: true\n    },\n    {\n      index: 2,\n      label: '登录信息',\n      key: 'customLoginInfo',\n      customRender: true,\n      singleLine: true\n    },\n    {\n      index: 3,\n      label: '请求地址',\n      key: 'request_path'\n    },\n    {\n      index: 4,\n      label: '请求参数',\n      key: 'request_body',\n      singleLine: true\n    },\n    {\n      index: 5,\n      label: '返回参数',\n      key: 'json_result'\n    },\n    {\n      index: 6,\n      label: '返回状态码',\n      key: 'response_code'\n    },\n    {\n      index: 7,\n      label: '操作状态',\n      key: 'status',\n      labelType: 'boolean',\n      labelChoices: {\n        false: '失败',\n        true: '正常'\n      }\n    },\n    {\n      index: 8,\n      label: '任务结果',\n      key: 'result',\n      singleLine: true\n    },\n    {\n      index: 9,\n      label: '操作时间',\n      key: 'create_datetime',\n      labelType: 'time',\n      singleLine: true\n    }\n  ]\n\n  export default {\n    name: 'Operlog',\n    components: { DetailFormDialog },\n    data() {\n      return {\n        // 遮罩层\n        loading: true,\n        // 选中数组\n        ids: [],\n        // 非多个禁用\n        multiple: true,\n        // 显示搜索条件\n        showSearch: true,\n        // 总条数\n        total: 0,\n        // 表格数据\n        list: [],\n        // 是否显示弹出层\n        openDetailModal: false,\n        // 类型数据字典\n        statusOptions: [{ dictLabel: '成功', dictValue: true }, { dictLabel: '失败', dictValue: false }],\n        // 日期范围\n        dateRange: [],\n        // 表单参数\n        form: {},\n        formItem: OPERATION_LOG_FORM_ITEM,\n        // 查询参数\n        queryParams: {\n          pageNum: 1,\n          pageSize: 10,\n          request_modular: undefined,\n          creator_name: undefined,\n          status: undefined\n        }\n      }\n    },\n    created() {\n      this.getList()\n    },\n    methods: {\n      /** 查询登录日志 */\n      getList() {\n        this.loading = true\n        list(this.addDateRange(this.queryParams, this.dateRange)).then(response => {\n            this.list = response.data.results\n            this.total = response.data.count\n            this.loading = false\n          }\n        )\n      },\n      // 操作日志状态字典翻译\n      statusFormat(row, column) {\n        return this.selectDictLabel(this.statusOptions, row.status)\n      },\n      /** 搜索按钮操作 */\n      handleQuery() {\n        this.queryParams.pageNum = 1\n        this.getList()\n      },\n      /** 重置按钮操作 */\n      resetQuery() {\n        this.dateRange = []\n        this.resetForm('queryForm')\n        this.handleQuery()\n      },\n      // 多选框选中数据\n      handleSelectionChange(selection) {\n        this.ids = selection.map(item => item.id)\n        this.multiple = !selection.length\n      },\n      /** 详细按钮操作 */\n      handleView(row) {\n        this.openDetailModal = true\n        this.form = row\n      },\n      /** 删除按钮操作 */\n      handleDelete(row) {\n        const ids = row.id || this.ids\n        this.$confirm('是否确认删除日志编号为\"' + ids + '\"的数据项?', '警告', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(function() {\n          return delOperationLog(ids)\n        }).then(() => {\n          this.getList()\n          this.msgSuccess('删除成功')\n        })\n      },\n      /** 清空按钮操作 */\n      handleClean() {\n        this.$confirm('是否确认清空所有操作日志数据项?', '警告', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(function() {\n          return cleanOperationLog()\n        }).then(() => {\n          this.getList()\n          this.msgSuccess('清空成功')\n        })\n      },\n      /** 导出按钮操作 */\n      handleExport() {\n        const queryParams = this.queryParams\n        this.$confirm('是否确认导出所有操作日志数据项?', '警告', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(function() {\n          return exportOperationLog(queryParams)\n        }).then(response => {\n          this.download(response.data.file_url, response.data.name)\n        })\n      },\n      connectFieldsContent(fieldsContent, symbol) {\n        fieldsContent.forEach((fieldContent, index) => {\n          if (!fieldContent) {\n            delete fieldsContent[index]\n          }\n        })\n        return fieldsContent.join(symbol)\n      }\n    }\n  }\n</script>\n\n"]}]}