{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\src\\views\\vadmin\\monitor\\celery\\periodic-task\\periodic-index.vue?vue&type=style&index=0&id=69704698&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\src\\views\\vadmin\\monitor\\celery\\periodic-task\\periodic-index.vue","mtime":1620833396835},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZWwtdGFibGUgdGggewogIGRpc3BsYXk6IHRhYmxlLWNlbGwgIWltcG9ydGFudDsKfQo="},{"version":3,"sources":["periodic-index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuNA;AACA;AACA","file":"periodic-index.vue","sourceRoot":"src/views/vadmin/monitor/celery/periodic-task","sourcesContent":["<!--\n@description: 接口信息页面\n-->\n<template>\n  <div class=\"app-container\">\n    <common-static-table\n      ref=\"table\"\n      :data=\"detail\"\n      :fields=\"fields\"\n      selection\n      @selection-change=\"handlePeriodicSelectionChange\"\n    >\n      <template v-slot:enabled=\"scope\">\n        <el-switch\n          :value=\"scope.values[scope.prop]\"\n          active-color=\"#13ce66\"\n          disabled\n          inactive-color=\"#ff4949\"/>\n      </template>\n      <template v-slot:interval=\"scope\">\n        {{ getIntervalData(scope.values[`${scope.prop}_list`]) }}\n      </template>\n      <template v-slot:crontab=\"scope\">\n        {{ getCrontabData(scope.values[`${scope.prop}_list`]) }}\n      </template>\n      <template slot=\"button\">\n        <el-button\n          :size=\"$ELEMENT.size\"\n          type=\"primary\"\n          title=\"添加任务\"\n          icon=\"el-icon-circle-plus\"\n          @click=\"handleOpenEditPeriodicForm(true)\">新增\n        </el-button>\n      </template>\n      <!--以下是自定义新增的工具栏内容-->\n      <template slot=\"tools\">\n        <el-popover placement=\"bottom\" title=\"温馨提示\" width=\"400\" trigger=\"click\" style=\"margin-left: 10px\">\n          <li>待编写</li>\n          <el-button\n            slot=\"reference\"\n            name=\"refresh\"\n            type=\"info\"\n            size=\"small\"\n            icon=\"el-icon-info\"\n            title=\"温馨提示\"/>\n        </el-popover>\n      </template>\n      <!--以下是自定义新增的列的配置内容-->\n      <template slot=\"column\">\n        <el-table-column fixed=\"right\" label=\"操作\" align=\"center\" width=\"150\">\n          <template slot-scope=\"scope\">\n            <el-button\n              :size=\"$ELEMENT.size\"\n              type=\"primary\"\n              title=\"立即执行\"\n              icon=\"el-icon-caret-right\"\n              circle\n              @click=\"test(scope.row)\"/>\n            <el-button\n              :size=\"$ELEMENT.size\"\n              type=\"primary\"\n              title=\"编辑\"\n              icon=\"el-icon-edit\"\n              circle\n              @click=\"handleOpenEditPeriodicForm(false, scope.row)\"/>\n            <el-button\n              :size=\"$ELEMENT.size\"\n              type=\"danger\"\n              title=\"移除\"\n              icon=\"el-icon-delete\"\n              circle\n              @click=\"handleRemovePeriodicTable(scope.$index, scope.row)\"\n            />\n          </template>\n        </el-table-column>\n      </template>\n    </common-static-table>\n    <el-dialog :visible.sync=\"dialogFormVisible\" title=\"请确认\" >\n      <span>\n        正在同步：{{ row.task }}\n      </span>\n      <br>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"handleOperate\">确 定</el-button>\n      </div>\n    </el-dialog>\n    <edit-form-periodic-task\n      v-model=\"editPeriodicFormVisible\"\n      :entity=\"editPeriodic\"\n      :create=\"editPeriodicCreate\"\n      :periodic-data=\"periodicData\"\n      :width=\"'40%'\"\n      @success=\"handleSuccessEditPeriodic\"/>\n  </div>\n</template>\n\n<script>\n  import * as SyncDataApi from \"@/api/vadmin/monitor/celery\";\n  import EditFormPeriodicTask from './edit-form-periodic-task';\n\n  export default {\n    components: { EditFormPeriodicTask },\n    props: {\n    },\n    data() {\n      return {\n        fields: [\n          // prop,后端列名称, 必填; label,前端表头名称, 必填; 其他可有可无\n          { prop: 'name', label: '名称', show: true, unique: true },\n          { prop: 'task', label: 'celery任务', show: true, width: 400 },\n          { prop: 'interval', label: '频率', show: true, search: true },\n          { prop: 'crontab', label: '任务编排', show: true, search: true, sortable: true },\n          { prop: 'args', label: '参数', show: false, search: true, sortable: true, width: 80 },\n          { prop: 'kwargs', label: '位置参数', show: false, search: true, sortable: true },\n          { prop: 'queue', label: '队列', show: false, search: true, sortable: true },\n          { prop: 'exchange', label: '状态', show: false, search: true },\n          { prop: 'routing_key', label: '路由密钥', show: false, search: true },\n          { prop: 'expires', label: '过期时间', show: false, search: true, type: 'datetime' },\n          { prop: 'enabled', label: '是否开启', show: true, search: true }\n        ],\n        periodicData: [],\n        multipleSelection: [],\n        PeriodicTagList: [],\n        editPeriodic: {},\n        editPeriodicFormVisible: false,\n        editPeriodicCreate: false,\n        modelFormVisible: false,\n        modelSwaggerVisible: false,\n        batchEditFormVisible: false,\n        detail: [],\n        dialogFormVisible: false,\n        form: { name: '' },\n        formLabelWidth: '120px',\n        row: '',\n        reqloading: false,\n        task_id:''\n      };\n    },\n    computed: {\n    },\n    watch: {\n    },\n    created() {\n      this.initData();\n    },\n    methods: {\n      initData() {\n        SyncDataApi.listPeriodicTask({ page_size: 1000 }).then((response) => {\n          this.detail = response.data.results || [];\n        });\n      },\n      handleRefresh(infos) {\n        this.$refs.table.clearSelection();\n        this.$emit('update');\n      },\n      handlePeriodicSelectionChange(infos) {\n        this.multipleSelection = infos;\n      },\n      handleOpenEditPeriodicForm(create = false, info) {\n        if (create) {\n          this.editPeriodic = { periodic: this.detail.id };\n        } else {\n          this.editPeriodic = { ...info };\n        }\n        this.editPeriodicCreate = create;\n        this.editPeriodicFormVisible = true;\n      },\n      handleRemovePeriodicTable(index, info) {\n        this.$confirm('确认删除？', '确认信息', {\n          distinguishCancelAndClose: true,\n          confirmButtonText: '删除',\n          cancelButtonText: '取消'\n        }).then(() => {\n          SyncDataApi.deletePeriodicTask(info.id).then(response => {\n            const name = info.name ? info.name + ':' : '';\n            this.msgSuccess(name + '删除成功');\n            this.initData();\n          });\n        });\n      },\n      handleSuccessEditPeriodic() {\n        this.initData();\n        this.$emit('update');\n      },\n      handleOpenModelForm() {\n        this.modelFormVisible = true;\n      },\n      handleOpenSwagger(model = false) {\n        this.modelSwaggerVisible = true;\n      },\n      handleBatchEdit() {\n        this.batchEditFormVisible = true;\n      },\n      test(row) {\n        this.dialogFormVisible = true;\n        this.row = row;\n        this.DetailMsg = ''\n      },\n      handleOperate() {\n        this.dialogFormVisible = false\n        this.reqloading = true;\n        SyncDataApi.operatesyncdata({ celery_name: this.row.task }).then(response => {\n         this.task_id = response.data.task_id\n          this.msgSuccess(\"执行成功！\");\n        })\n      },\n      closeView(){\n        this.reqloading = false\n      }\n    }\n  };\n</script>\n\n<style scoped>\n  .el-table th {\n    display: table-cell !important;\n  }\n</style>\n"]}]}