{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\src\\views\\vadmin\\monitor\\celery\\interval-task\\edit-form-Interval-task.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\src\\views\\vadmin\\monitor\\celery\\interval-task\\edit-form-Interval-task.vue","mtime":1620833396835},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIFN5bmNEYXRhQXBpIGZyb20gIkAvYXBpL3ZhZG1pbi9tb25pdG9yL2NlbGVyeSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIGVudGl0eToge3R5cGU6IE9iamVjdCwgZGVmYXVsdDogbnVsbH0sCiAgICB2YWx1ZToge3R5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IG51bGx9LAogICAgY3JlYXRlOiB7dHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2V9LAogICAgd2lkdGg6IHt0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICc1MCUnfSwKICAgIHRhZ3M6IHt0eXBlOiBBcnJheSwgZGVmYXVsdDogKCkgPT4gW119CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdHM6IFsKICAgICAgICB7bGFiZWw6ICflpKknLCB2YWx1ZTogJ2RheXMnfSwKICAgICAgICB7bGFiZWw6ICflsI/ml7YnLCB2YWx1ZTogJ2hvdXJzJ30sCiAgICAgICAge2xhYmVsOiAn5YiG6ZKfJywgdmFsdWU6ICdtaW51dGVzJ30sCiAgICAgICAge2xhYmVsOiAn56eSJywgdmFsdWU6ICdzZWNvbmRzJ30KICAgICAgXSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBmb3JtOiB7CiAgICAgICAgaW5zdGFuY2VJZDogJycsCiAgICAgICAgZXZlcnk6IDEsCiAgICAgICAgcGVyaW9kOiAnJywKICAgICAgICB0aXRsZTogJycKICAgICAgfQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBkaWFsb2dUaXRsZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlID8gJ+aWsOWinuS7u+WKoemikeeOhycgOiAn57yW6L6R5Lu75Yqh6aKR546HJzsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICB2YWx1ZSh2YWwpIHsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdmFsOwogICAgfSwKICAgIGRpYWxvZ1Zpc2libGUodmFsKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgdmFsKTsKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgfSwKICBtZXRob2RzOiB7CiAgICBkaWFsb2dPcGVuKCkgewogICAgICAvLyDkuLpUcnVl5oSP5ZGz552A5piv6YCa6L+H6YGN5Y+K5pa55byP5omT5byA5a+56K+d5qGGCiAgICAgIGlmICghdGhpcy5jcmVhdGUpIHsKICAgICAgICB0aGlzLmZvcm0gPSB7Li4udGhpcy5lbnRpdHl9OwogICAgICB9CiAgICB9LAogICAgaGFuZGxlU3VibWl0KCkgewogICAgICB0aGlzLiRyZWZzWydmb3JtJ10udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgY29uc3QgZGF0YSA9IHsuLi50aGlzLmZvcm19OwogICAgICAgICAgY29uc29sZS5sb2codGhpcy5mb3JtKTsKICAgICAgICAgIGlmICh0aGlzLmNyZWF0ZSkgewogICAgICAgICAgICBkZWxldGUgZGF0YVsnaW5zdGFuY2VJZCddOwogICAgICAgICAgICBTeW5jRGF0YUFwaS5jcmVhdGVJbnRlcnZhbHNjaGVkdWxlKGRhdGEpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3N1Y2Nlc3MnLCByZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Nsb3NlKCk7CiAgICAgICAgICAgICAgdGhpcy5tc2dTdWNjZXNzKCfmlrDlop7miJDlip8hJyk7CiAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBTeW5jRGF0YUFwaS51cGRhdGVJbnRlcnZhbHNjaGVkdWxlKGRhdGEpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3N1Y2Nlc3MnLCByZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICB0aGlzLm1zZ1N1Y2Nlc3MoJ+abtOaWsOaIkOWKnyEnKTsKICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Nsb3NlKCk7CiAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGRpYWxvZ0Nsb3NlKCkgewogICAgICB0aGlzLiRyZWZzWydmb3JtJ10ucmVzZXRGaWVsZHMoKTsKICAgICAgdGhpcy4kcGFyZW50LmluaXREYXRhKCk7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["edit-form-Interval-task.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"edit-form-Interval-task.vue","sourceRoot":"src/views/vadmin/monitor/celery/interval-task","sourcesContent":["<!--\n@author: xuchi\n@description: 接口编辑组件\n-->\n<template>\n  <small-dialog\n    ref=\"dialog\"\n    v-model=\"dialogVisible\"\n    :dialog-title=\"dialogTitle\"\n    :width=\"width\"\n    icon=\"svg:icon-interface\"\n    @confirm=\"handleSubmit\"\n    @closed=\"dialogClose\"\n    @opened=\"dialogOpen\">\n    <el-form v-loading=\"loading\" ref=\"form\" :model=\"form\" :size=\"$ELEMENT.size\" label-width=\"120px\">\n      <el-form-item v-show=\"false\" prop=\"instanceId\" label=\"instanceId\" style=\"width: 200px;\">\n        <el-input v-model=\"form.instanceId\" readonly/>\n      </el-form-item>\n      <el-form-item prop=\"every\" label=\"频率:\">\n        <el-input-number v-model=\"form.every\" :min=\"1\" label=\"频率\"/>\n      </el-form-item>\n      <el-form-item prop=\"period\" label=\"周期:\">\n        <el-select v-model=\"form.period\" placeholder=\"请选择\">\n          <el-option\n            v-for=\"(item,index) in lists\"\n            :key=\"index.value\"\n            :label=\"item.label\"\n            :value=\"item.value\"/>\n        </el-select>\n      </el-form-item>\n    </el-form>\n  </small-dialog>\n</template>\n<script>\n  import * as SyncDataApi from \"@/api/vadmin/monitor/celery\";\n\n  export default {\n    props: {\n      entity: {type: Object, default: null},\n      value: {type: Boolean, default: null},\n      create: {type: Boolean, default: false},\n      width: {type: String, default: '50%'},\n      tags: {type: Array, default: () => []}\n    },\n    data() {\n      return {\n        lists: [\n          {label: '天', value: 'days'},\n          {label: '小时', value: 'hours'},\n          {label: '分钟', value: 'minutes'},\n          {label: '秒', value: 'seconds'}\n        ],\n        loading: false,\n        dialogVisible: false,\n        form: {\n          instanceId: '',\n          every: 1,\n          period: '',\n          title: ''\n        }\n      };\n    },\n    computed: {\n      dialogTitle() {\n        return this.create ? '新增任务频率' : '编辑任务频率';\n      }\n    },\n    watch: {\n      value(val) {\n        this.dialogVisible = val;\n      },\n      dialogVisible(val) {\n        this.$emit('input', val);\n      }\n    },\n    created() {\n    },\n    methods: {\n      dialogOpen() {\n        // 为True意味着是通过遍及方式打开对话框\n        if (!this.create) {\n          this.form = {...this.entity};\n        }\n      },\n      handleSubmit() {\n        this.$refs['form'].validate((valid) => {\n          if (valid) {\n            this.loading = true;\n            const data = {...this.form};\n            console.log(this.form);\n            if (this.create) {\n              delete data['instanceId'];\n              SyncDataApi.createIntervalschedule(data).then(response => {\n                this.loading = false;\n                this.$emit('success', response.data);\n                this.dialogClose();\n                this.msgSuccess('新增成功!');\n              }).catch(() => {\n                this.loading = false;\n              });\n            } else {\n              SyncDataApi.updateIntervalschedule(data).then(response => {\n                this.$emit('success', response.data);\n                this.loading = false;\n                this.msgSuccess('更新成功!');\n                this.dialogClose();\n              }).catch(() => {\n                this.loading = false;\n              });\n            }\n          } else {\n            return false;\n          }\n        });\n      },\n      dialogClose() {\n        this.$refs['form'].resetFields();\n        this.$parent.initData();\n        this.dialogVisible = false;\n      }\n    }\n  };\n</script>\n\n"]}]}