{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\src\\views\\vadmin\\monitor\\server\\components\\InstrumentBoard.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\src\\views\\vadmin\\monitor\\server\\components\\InstrumentBoard.vue","mtime":1620833396842},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\django-vue-admin\\dvadmin-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWVUeXBlcyBmcm9tICd2dWUtdHlwZXMnCi8vIOW8leWFpeWfuuacrOaooeadvyzmjInpnIDliqDovb0KY29uc3QgZWNoYXJ0cyA9IHJlcXVpcmUoJ2VjaGFydHMvbGliL2VjaGFydHMnKQpyZXF1aXJlKCdlY2hhcnRzL2xpYi9jaGFydC9nYXVnZScpCgovLyDku6rooajnm5jpopzoibLojIPlm7QKY29uc3QgTk9STUFMX0NPTE9SID0gewogIGNvbG9yOiAnIzI4QkNGRScsCiAgaXRlbUNvbG9yOiBbJyMyNWJmZmYnLCAnIzUyODRkZScsICcjMmE5NWY5J10KfQpjb25zdCBXQVJOSU5HX0NPTE9SID0gewogIGNvbG9yOiAnI2U2YTIzYycsCiAgaXRlbUNvbG9yOiBbJyNlNmEyM2MnLCAnI2NjOGIxZCcsICcjZmZhZjE4J10KfQpjb25zdCBEQU5HRVJfQ09MT1IgPSB7CiAgY29sb3I6ICcjRjU2QzZDJywKICBpdGVtQ29sb3I6IFsnI2ZkNjY2ZCcsICcjY2YxNzE3JywgJyNiMzEyMTInXQp9CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0luc3RydW1lbnRCb2FyZCcsCiAgcHJvcHM6IHsKICAgIC8vIOe7hOS7tmtleQogICAgcmluZ0dyYXBoS2V5OiBWdWVUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCwKICAgIC8vIOS4iuagh+mimAogICAgc2hvd1RvcFRpdGxlOiBWdWVUeXBlcy5ib29sLmRlZihmYWxzZSksCiAgICAvLyDkuIvmoIfpopgKICAgIHNob3dTdWJUaXRsZTogVnVlVHlwZXMuYm9vbC5kZWYoZmFsc2UpLAogICAgLy8gdG9wIHRpdGxlIOmFjee9ruaYoOWwhAogICAgdG9wVGl0bGVLZXlUb05hbWVNYXBwaW5nOiBWdWVUeXBlcy5vYmplY3QuZGVmKHsKICAgICAgY3B1OiAnQ1BV5L2/55So546HJywKICAgICAgbWVtb3J5OiAn5YaF5a2Y5L2/55So546HJwogICAgfSksCiAgICBpbnN0cnVtZW50Qm9hcmREYXRhOiBWdWVUeXBlcy5hbnkuaXNSZXF1aXJlZAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOW9k+WJjeaYvuekuueahOaVsOaNrgogICAgICBjdXJyZW50SW5zdHJ1bWVudEJvYXJkRGF0YToge30KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyDku6rooajnm5jmmK/lkKblrZjlnKjlpJrkuKrmlbDmja4KICAgIGhhdmVNdWx0aXBsZURhdGEoKSB7CiAgICAgIHJldHVybiB0aGlzLmluc3RydW1lbnRCb2FyZERhdGEgaW5zdGFuY2VvZiBBcnJheSAmJiB0aGlzLmluc3RydW1lbnRCb2FyZERhdGEubGVuZ3RoID4gMAogICAgfSwKICAgIC8vIOS9v+eUqOeOhwogICAgcmluZ1JhdGUoKSB7CiAgICAgIGxldCByaW5nUmF0ZSA9IHRoaXMuY3VycmVudEluc3RydW1lbnRCb2FyZERhdGEucmF0ZQogICAgICByaW5nUmF0ZSA9IHJpbmdSYXRlIDwgMSA/IHJpbmdSYXRlICogMTAwIDogcmluZ1JhdGUKICAgICAgcmV0dXJuIHBhcnNlRmxvYXQocmluZ1JhdGUudG9GaXhlZCg0KSkKICAgIH0sCiAgICAvLyDku6rooajnm5hpZAogICAgcmluZ0dyYXBoSWQoKSB7CiAgICAgIHJldHVybiBgJHt0aGlzLnJpbmdHcmFwaEtleX1Vc2luZ1JhdGVgCiAgICB9LAogICAgLy8g5LiK5pa55qCH6aKYCiAgICB0b3BUaXRsZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY3VycmVudEluc3RydW1lbnRCb2FyZERhdGFbJ2Rpcl9uYW1lJ10gfHwgdGhpcy50b3BUaXRsZUtleVRvTmFtZU1hcHBpbmdbdGhpcy5yaW5nR3JhcGhLZXldIHx8IHRoaXMucmluZ0dyYXBoS2V5CiAgICB9LAogICAgLy8g5LiL5pa55qCH6aKYCiAgICBzdWJUaXRsZSgpIHsKICAgICAgbGV0IHVzZWQgPSB0aGlzLmN1cnJlbnRJbnN0cnVtZW50Qm9hcmREYXRhWyd1c2VkJ10gPyB0aGlzLmN1cnJlbnRJbnN0cnVtZW50Qm9hcmREYXRhWyd1c2VkJ10gKyAnLycgOiAnJwogICAgICBsZXQgdG90YWwgPSB0aGlzLmN1cnJlbnRJbnN0cnVtZW50Qm9hcmREYXRhWyd0b3RhbCddID8gdGhpcy5jdXJyZW50SW5zdHJ1bWVudEJvYXJkRGF0YVsndG90YWwnXSA6ICcnCiAgICAgIGxldCB1bml0ID0gdGhpcy5jdXJyZW50SW5zdHJ1bWVudEJvYXJkRGF0YVsndW5pdCddID8gYCAoJHt0aGlzLmN1cnJlbnRJbnN0cnVtZW50Qm9hcmREYXRhWyd1bml0J119KWAgOiAnJwogICAgICBsZXQgY29udGVudCA9IGAke3VzZWR9JHt0b3RhbH0ke3VuaXR9IGAKICAgICAgbGV0IHRpdGxlID0gKHRoaXMuY3VycmVudEluc3RydW1lbnRCb2FyZERhdGFbJ3VzZWQnXSA/ICflt7LnlKgvJyA6ICcnKSArICfmgLvph48o5Y2V5L2NKScKICAgICAgcmV0dXJuIHsgY29udGVudCwgdGl0bGUgfQogICAgfSwKICAgIC8vIOS9v+eUqOeOh+agt+W8j+mFjee9rgogICAgdXNpbmdSYXRlU3R5bGUoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgZm9udFNpemU6IDE4LAogICAgICAgIC4uLnRoaXMuZ2V0Q2lyY2xlQ29sb3IodGhpcy5yaW5nUmF0ZSkKICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIGlmICh0aGlzLmhhdmVNdWx0aXBsZURhdGEpIHsKICAgICAgdGhpcy5jdXJyZW50SW5zdHJ1bWVudEJvYXJkRGF0YSA9IHRoaXMuaW5zdHJ1bWVudEJvYXJkRGF0YVswXQogICAgfSBlbHNlIHsKICAgICAgdGhpcy5jdXJyZW50SW5zdHJ1bWVudEJvYXJkRGF0YSA9IHRoaXMuaW5zdHJ1bWVudEJvYXJkRGF0YQogICAgfQogICAgdGhpcy5kcmF3QmFyKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGRyYXdCYXIoKSB7CiAgICAgIGxldCBjdXJyZW50UmF0ZSA9IFt0aGlzLnJpbmdSYXRlXQogICAgICAvLyDln7rkuo5kb23vvIzliJ3lp4vljJZlY2hhcnRz5a6e5L6LCiAgICAgIGxldCBSaW5nR3JhcGggPSBlY2hhcnRzLmluaXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5yaW5nR3JhcGhJZCkpCgogICAgICBsZXQgb3B0aW9uID0gewogICAgICAgIHRpdGxlOiB7CiAgICAgICAgICB0ZXh0OiBjdXJyZW50UmF0ZSArICclJywKICAgICAgICAgIHRleHRTdHlsZTogdGhpcy51c2luZ1JhdGVTdHlsZSwKICAgICAgICAgIGl0ZW1HYXA6IDEwLAogICAgICAgICAgbGVmdDogJ2NlbnRlcicsCiAgICAgICAgICB0b3A6ICc0NSUnCiAgICAgICAgfSwKICAgICAgICBhbmdsZUF4aXM6IHsKICAgICAgICAgIG1heDogMTAwLAogICAgICAgICAgY2xvY2t3aXNlOiB0cnVlLCAvLyDpgIbml7bpkogKICAgICAgICAgIC8vIOmakOiXj+WIu+W6pue6vwogICAgICAgICAgc2hvdzogZmFsc2UKICAgICAgICB9LAogICAgICAgIHJhZGl1c0F4aXM6IHsKICAgICAgICAgIHR5cGU6ICdjYXRlZ29yeScsCiAgICAgICAgICBzaG93OiB0cnVlLAogICAgICAgICAgYXhpc0xhYmVsOiB7CiAgICAgICAgICAgIHNob3c6IGZhbHNlCiAgICAgICAgICB9LAogICAgICAgICAgYXhpc0xpbmU6IHsKICAgICAgICAgICAgc2hvdzogZmFsc2UKICAgICAgICAgIH0sCiAgICAgICAgICBheGlzVGljazogewogICAgICAgICAgICBzaG93OiBmYWxzZQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgcG9sYXI6IHsKICAgICAgICAgIGNlbnRlcjogWyc1MCUnLCAnNTAlJ10sIC8vIOWdkOagh+S4reW/g+S9jee9rgogICAgICAgICAgcmFkaXVzOiAnMTAwJScgLy/lm77lvaLlpKflsI8KICAgICAgICB9LAogICAgICAgIHNlcmllczogW3sKICAgICAgICAgIHR5cGU6ICdiYXInLAogICAgICAgICAgZGF0YTogY3VycmVudFJhdGUsCiAgICAgICAgICBzaG93QmFja2dyb3VuZDogdHJ1ZSwKICAgICAgICAgIGJhY2tncm91bmRTdHlsZTogewogICAgICAgICAgICBjb2xvcjogJyNCREVCRkYnIC8vIOW6leWciOminOiJsgogICAgICAgICAgfSwKICAgICAgICAgIGNvb3JkaW5hdGVTeXN0ZW06ICdwb2xhcicsCiAgICAgICAgICByb3VuZENhcDogdHJ1ZSwKICAgICAgICAgIGJhcldpZHRoOiAxNSwKICAgICAgICAgIGl0ZW1TdHlsZTogewogICAgICAgICAgICBub3JtYWw6IHsKICAgICAgICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgICAgICAgIGNvbG9yOiBuZXcgZWNoYXJ0cy5ncmFwaGljLkxpbmVhckdyYWRpZW50KDAsIDAsIDAsIDEsIFt7CiAgICAgICAgICAgICAgICBvZmZzZXQ6IDAsCiAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy51c2luZ1JhdGVTdHlsZS5pdGVtQ29sb3JbMF0gfHwgJyMyNUJGRkYnCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgb2Zmc2V0OiAxLAogICAgICAgICAgICAgICAgY29sb3I6IHRoaXMudXNpbmdSYXRlU3R5bGUuaXRlbUNvbG9yWzFdIHx8ICcjNTI4NERFJwogICAgICAgICAgICAgIH1dKSwKICAgICAgICAgICAgICBzaGFkb3dCbHVyOiAxLAogICAgICAgICAgICAgIHNoYWRvd0NvbG9yOiB0aGlzLnVzaW5nUmF0ZVN0eWxlLml0ZW1Db2xvclsyXSB8fCAnIzJBOTVGOScKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH1dCiAgICAgIH0KICAgICAgLy8g57uY5Yi25Zu+6KGoCiAgICAgIFJpbmdHcmFwaC5zZXRPcHRpb24ob3B0aW9uKQogICAgfSwKICAgIC8vIOS7quihqOebmOagt+W8jy3popzoibIKICAgIGdldENpcmNsZUNvbG9yKHVzaW5nUmF0ZSkgewogICAgICBpZiAodXNpbmdSYXRlIDwgNjApIHsKICAgICAgICByZXR1cm4gTk9STUFMX0NPTE9SCiAgICAgIH0gZWxzZSBpZiAodXNpbmdSYXRlID4gNjAgJiYgdXNpbmdSYXRlIDwgODApIHsKICAgICAgICByZXR1cm4gV0FSTklOR19DT0xPUgogICAgICB9IGVsc2UgaWYgKHVzaW5nUmF0ZSA+IDgwKSB7CiAgICAgICAgcmV0dXJuIERBTkdFUl9DT0xPUgogICAgICB9CiAgICAgIHJldHVybiBOT1JNQUxfQ09MT1IKICAgIH0sCiAgICBjaG9vc2VEaXNwbGF5SW5zdHJ1bWVudEJvYXJkRGF0YShpbmRleCkgewogICAgICB0aGlzLmN1cnJlbnRJbnN0cnVtZW50Qm9hcmREYXRhID0gdGhpcy5pbnN0cnVtZW50Qm9hcmREYXRhW2luZGV4XQogICAgICB0aGlzLmRyYXdCYXIoKQogICAgfQogIH0KCn0K"},{"version":3,"sources":["InstrumentBoard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"InstrumentBoard.vue","sourceRoot":"src/views/vadmin/monitor/server/components","sourcesContent":["<template>\n  <div class=\"instrument-board\">\n    <div v-if=\"showTopTitle && haveMultipleData\" class=\"instrument-board-title\">\n      <el-select :value=\"topTitle\"\n                 @change=\"chooseDisplayInstrumentBoardData\"\n      >\n        <el-option\n          v-for=\"(item,index) in instrumentBoardData\"\n          :key=\"index\"\n          :label=\"item.name || item['dir_name']\"\n          :value=\"index\"\n        >\n        </el-option>\n      </el-select>\n\n    </div>\n    <div v-else-if=\"showTopTitle\" class=\"instrument-board-title\">\n      {{ topTitle }}\n    </div>\n\n    <div :id=\"ringGraphId\" class=\"instrument-board-body\"></div>\n    <div v-if=\"showSubTitle\"\n         class=\"instrument-board-subtitle\"\n         :title=\"subTitle.title\"\n    >{{ subTitle.content }}\n    </div>\n  </div>\n</template>\n\n<script>\nimport VueTypes from 'vue-types'\n// 引入基本模板,按需加载\nconst echarts = require('echarts/lib/echarts')\nrequire('echarts/lib/chart/gauge')\n\n// 仪表盘颜色范围\nconst NORMAL_COLOR = {\n  color: '#28BCFE',\n  itemColor: ['#25bfff', '#5284de', '#2a95f9']\n}\nconst WARNING_COLOR = {\n  color: '#e6a23c',\n  itemColor: ['#e6a23c', '#cc8b1d', '#ffaf18']\n}\nconst DANGER_COLOR = {\n  color: '#F56C6C',\n  itemColor: ['#fd666d', '#cf1717', '#b31212']\n}\n\nexport default {\n  name: 'InstrumentBoard',\n  props: {\n    // 组件key\n    ringGraphKey: VueTypes.string.isRequired,\n    // 上标题\n    showTopTitle: VueTypes.bool.def(false),\n    // 下标题\n    showSubTitle: VueTypes.bool.def(false),\n    // top title 配置映射\n    topTitleKeyToNameMapping: VueTypes.object.def({\n      cpu: 'CPU使用率',\n      memory: '内存使用率'\n    }),\n    instrumentBoardData: VueTypes.any.isRequired\n  },\n  data() {\n    return {\n      // 当前显示的数据\n      currentInstrumentBoardData: {}\n    }\n  },\n  computed: {\n    // 仪表盘是否存在多个数据\n    haveMultipleData() {\n      return this.instrumentBoardData instanceof Array && this.instrumentBoardData.length > 0\n    },\n    // 使用率\n    ringRate() {\n      let ringRate = this.currentInstrumentBoardData.rate\n      ringRate = ringRate < 1 ? ringRate * 100 : ringRate\n      return parseFloat(ringRate.toFixed(4))\n    },\n    // 仪表盘id\n    ringGraphId() {\n      return `${this.ringGraphKey}UsingRate`\n    },\n    // 上方标题\n    topTitle() {\n      return this.currentInstrumentBoardData['dir_name'] || this.topTitleKeyToNameMapping[this.ringGraphKey] || this.ringGraphKey\n    },\n    // 下方标题\n    subTitle() {\n      let used = this.currentInstrumentBoardData['used'] ? this.currentInstrumentBoardData['used'] + '/' : ''\n      let total = this.currentInstrumentBoardData['total'] ? this.currentInstrumentBoardData['total'] : ''\n      let unit = this.currentInstrumentBoardData['unit'] ? ` (${this.currentInstrumentBoardData['unit']})` : ''\n      let content = `${used}${total}${unit} `\n      let title = (this.currentInstrumentBoardData['used'] ? '已用/' : '') + '总量(单位)'\n      return { content, title }\n    },\n    // 使用率样式配置\n    usingRateStyle() {\n      return {\n        fontSize: 18,\n        ...this.getCircleColor(this.ringRate)\n      }\n    }\n  },\n  mounted() {\n    if (this.haveMultipleData) {\n      this.currentInstrumentBoardData = this.instrumentBoardData[0]\n    } else {\n      this.currentInstrumentBoardData = this.instrumentBoardData\n    }\n    this.drawBar()\n  },\n  methods: {\n    drawBar() {\n      let currentRate = [this.ringRate]\n      // 基于dom，初始化echarts实例\n      let RingGraph = echarts.init(document.getElementById(this.ringGraphId))\n\n      let option = {\n        title: {\n          text: currentRate + '%',\n          textStyle: this.usingRateStyle,\n          itemGap: 10,\n          left: 'center',\n          top: '45%'\n        },\n        angleAxis: {\n          max: 100,\n          clockwise: true, // 逆时针\n          // 隐藏刻度线\n          show: false\n        },\n        radiusAxis: {\n          type: 'category',\n          show: true,\n          axisLabel: {\n            show: false\n          },\n          axisLine: {\n            show: false\n          },\n          axisTick: {\n            show: false\n          }\n        },\n        polar: {\n          center: ['50%', '50%'], // 坐标中心位置\n          radius: '100%' //图形大小\n        },\n        series: [{\n          type: 'bar',\n          data: currentRate,\n          showBackground: true,\n          backgroundStyle: {\n            color: '#BDEBFF' // 底圈颜色\n          },\n          coordinateSystem: 'polar',\n          roundCap: true,\n          barWidth: 15,\n          itemStyle: {\n            normal: {\n              opacity: 1,\n              color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                offset: 0,\n                color: this.usingRateStyle.itemColor[0] || '#25BFFF'\n              }, {\n                offset: 1,\n                color: this.usingRateStyle.itemColor[1] || '#5284DE'\n              }]),\n              shadowBlur: 1,\n              shadowColor: this.usingRateStyle.itemColor[2] || '#2A95F9'\n            }\n          }\n        }]\n      }\n      // 绘制图表\n      RingGraph.setOption(option)\n    },\n    // 仪表盘样式-颜色\n    getCircleColor(usingRate) {\n      if (usingRate < 60) {\n        return NORMAL_COLOR\n      } else if (usingRate > 60 && usingRate < 80) {\n        return WARNING_COLOR\n      } else if (usingRate > 80) {\n        return DANGER_COLOR\n      }\n      return NORMAL_COLOR\n    },\n    chooseDisplayInstrumentBoardData(index) {\n      this.currentInstrumentBoardData = this.instrumentBoardData[index]\n      this.drawBar()\n    }\n  }\n\n}\n</script>\n\n<style scoped>\n.instrument-board-title {\n  font-weight: bolder;\n  text-align: center;\n}\n\n.instrument-board-body {\n  min-height: 200px;\n  min-width: 200px;\n}\n\n.instrument-board-subtitle {\n  text-align: center;\n}\n</style>\n"]}]}